import{d as ye,ap as K,aq as U,j as L,l as f,s as Fe,p as Be,n as j,k as Q,_ as De,o as B,e as O,a as o,w as d,f as e,H as w,I as _,aj as $,ak as ve,al as ee,M as V,U as x,N as xe,g as E,h as z,c as S,a2 as T,a3 as te,a4 as le,J as R,ar as ae,O as Ie,P as we}from"./index-C5K_s1wl.js";import{a as Ae}from"./useNetwork-BBZmMd-V.js";import{a as Ve}from"./utils-CFlAkpuO.js";import{P as Ee}from"./PeriodDate-Y1bD6Y6f.js";import{L as Se}from"./LandingSelect-DityfkCS.js";import{B as Ne}from"./common-AUcBvRqL.js";import{u as ke}from"./useCommonCode-DIzdSdac.js";const oe=5,se=1,Y=2*1024*1024,Pe=ye({__name:"EventForm",props:K({isForDetails:{type:Boolean,required:!0},displayFlag:{type:[String,null],required:!0},title:{type:String,required:!0},contents:{type:String,required:!0},note:{type:String,required:!0},btnName:{type:[String,null],required:!0},postId:{type:String},imageFiles:{type:Object,required:!0},imageFileBanner:{type:Object,required:!0},pinFlag:{type:String,required:!0},selectedPeriod:{type:Boolean,required:!0},pubStartDate:{type:[String,Date,null],required:!0},pubEndDate:{type:[String,Date,null],required:!0},landingLocationOpts:{type:Array,required:!0}},{landing:{type:Object,required:!0},landingModifiers:{},parentCategoryId:{type:[String,null],required:!0},parentCategoryIdModifiers:{},subCategoryId:{type:[String,null],required:!0},subCategoryIdModifiers:{}}),emits:K(["update:categoryId","update:displayFlag","update:title","update:contents","update:note","update:btnName","update:imageFiles","update:imageFileBanner","update:pinFlag","update:pubStartDate","update:pubEndDate","update:selectedPeriod","afterInit"],["update:landing","update:parentCategoryId","update:subCategoryId"]),setup(h,{expose:s,emit:F}){const{getBoardCategory:l}=ke(),n=h,p=F,a=U(h,"landing"),c=U(h,"parentCategoryId"),r=U(h,"subCategoryId");let y=!1,D=!1;const A=L([]),N=f(()=>A.value.map(t=>({text:t.codeName,value:t.codeId}))),v=f(()=>{var i;const t=A.value.find(C=>C.codeId===c.value);return!t||!((i=t.subCommonCodeList)!=null&&i.length)?[]:t.subCommonCodeList.map(C=>({text:C.codeName,value:C.codeId}))}),k=()=>{y=!0,r.value="없음"},X=()=>{D=!0,c.value="없음"},G=async()=>{var i;const t=await l(Ne.EVENTBOARD);t&&(A.value=t.categoryList,await j(),n.isForDetails||(c.value=((i=N.value[0])==null?void 0:i.value)??null))},P=async t=>{var i,C;if(await j(),!!t){if(D=!1,y=!1,r.value&&v.value.findIndex(b=>b.value===r.value)<0){(i=v.value[0])!=null&&i.value?r.value=v.value[0].value:r.value=null;return}r.value||(r.value=((C=v.value[0])==null?void 0:C.value)??null)}},ne=()=>{y=!1};Fe(c,()=>{P(c.value)},{immediate:!0});const H=async()=>{await Promise.all([G()])},J=()=>({category:D,subCategory:y}),W=async()=>{await j(),!c.value||N.value.findIndex(t=>t.value===c.value)<0?(X(),k()):(!r.value||v.value.findIndex(t=>t.value===r.value)<0)&&k()};s({isCategoryNotExist:J,initCategory:W}),Be(()=>{H().then(()=>{p("afterInit"),n.isForDetails||P(c.value)})});const{alert:I}=Ae(),ie=f({get(){return n.selectedPeriod},set(t){p("update:selectedPeriod",t)}}),ue=f({get(){return n.displayFlag},set(t){p("update:displayFlag",t)}}),de=f({get(){return n.title},set(t){p("update:title",t)}}),re=f({get(){return n.contents},set(t){p("update:contents",t)}}),ce=f({get(){return n.note},set(t){p("update:note",t)}}),Ce=f({get(){return n.btnName},set(t){p("update:btnName",t)}}),pe=f({get(){return n.pubStartDate},set(t){p("update:pubStartDate",t)}}),ge=f({get(){return n.pubEndDate},set(t){p("update:pubEndDate",t)}}),me=f({get(){return n.pinFlag==="Y"},set(t){p("update:pinFlag",t?"Y":"N")}});function be(t){return t.fileName!==void 0}const g=L(),m=L(),q=()=>{p("update:imageFileBanner",Q({files:n.imageFileBanner.files,deleteFiles:n.imageFileBanner.deleteFiles}))},fe=()=>{m.value&&m.value.click&&m.value.click()},_e=()=>{const t=n.imageFileBanner.files;if(!m.value||!m.value.files||!m.value.files.length)return;const i=Array.from(m.value.files);if(t.length+i.length>se){I("이미지는 최대 1개 등록가능합니다.");return}for(const C of i){if(C.size>Y){I("파일 1개당 용량 (2MB)이 초과되었습니다.");continue}for(let b=0;b<m.value.files.length;b++)m.value.files.item(b)&&!t.includes(m.value.files.item(b))&&t.length<5&&t.push(m.value.files.item(b))}q(),m.value.value=""},he=t=>{const i=n.imageFileBanner.files,C=n.imageFileBanner.deleteFiles;i[t]instanceof File||C.push(i[t]),i.splice(t,1),q()},M=()=>{p("update:imageFiles",Q({files:n.imageFiles.files,deleteFiles:n.imageFiles.deleteFiles}))},Z={getBoardCategory:l,props:n,emits:p,landingLocation:a,parentCategoryId:c,subCategoryId:r,get supCategoryIdNotExist(){return y},set supCategoryIdNotExist(t){y=t},get categoryIdNotExist(){return D},set categoryIdNotExist(t){D=t},categoryList:A,parentCategoryItems:N,subCategoryItems:v,setSupCategoryNotExist:k,setCategoryNotExist:X,getCategorySelection:G,onParentCategoryChange:P,onSubCategoryChange:ne,init:H,isCategoryNotExist:J,initCategory:W,alert:I,MAX_FILE_COUNT:oe,MAX_FILE_BANNER_COUNT:se,MAX_FILE_SIZE:Y,selectedPeriod:ie,displayFlag:ue,title:de,contents:re,note:ce,btnName:Ce,pubStartDate:pe,pubEndDate:ge,pinFlag:me,isImageFile:be,inputFile:g,inputFileBanner:m,emitUpdateFileBanner:q,selectFileBanner:fe,onInputFileBanner:_e,onDeleteFileBanner:he,emitUpdateImageFiles:M,selectImageFiles:()=>{g.value&&g.value.click&&g.value.click()},onInputImageFiles:()=>{const t=n.imageFiles.files;if(!g.value||!g.value.files||!g.value.files.length)return;const i=Array.from(g.value.files);if(t.length+i.length>oe){I("이미지는 최대 5개 등록가능합니다.");return}for(const C of i){if(C.size>Y){I("파일 1개당 용량 (2MB)이 초과되었습니다.");continue}for(let b=0;b<g.value.files.length;b++)g.value.files.item(b)&&!t.includes(g.value.files.item(b))&&t.length<5&&t.push(g.value.files.item(b))}M(),g.value.value=""},onDeleteImageFiles:t=>{const i=n.imageFiles.files,C=n.imageFiles.deleteFiles;i[t]instanceof File||C.push(i[t]),i.splice(t,1),M()},get toFileSize(){return Ve},PeriodDate:Ee,LandingSelect:Se};return Object.defineProperty(Z,"__isScriptSetup",{enumerable:!1,value:!0}),Z}}),u=h=>(Ie("data-v-be708bc7"),h=h(),we(),h),qe={class:"form-table"},Me=u(()=>e("colgroup",null,[e("col",{style:{width:"124px"}}),e("col"),e("col",{style:{width:"124px"}}),e("col")],-1)),Ue={class:"border-b-sm"},Le=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"카테고리",-1)),je={class:"px-4 py-2"},Oe=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"노출여부",-1)),ze={class:"px-4 py-2"},Te={class:"border-b-sm"},Re=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"제목",-1)),Ye={class:"px-4 py-2"},Xe=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"게시글ID",-1)),Ge={class:"px-4 py-2"},He={class:"border-b-sm"},Je=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"게시기간",-1)),We={class:"px-4 py-2"},Ze=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"상단고정",-1)),Ke={class:"px-4 py-2"},Qe={class:"border-b-sm text-button font-weight-bold"},$e=u(()=>e("th",{class:"border-e-sm"},"목록 배너 등록",-1)),et={class:"px-4 py-2",colspan:"3"},tt={class:"d-flex align-end ga-6"},lt=u(()=>e("input",{type:"text",hidden:""},null,-1)),at=u(()=>e("p",null,"최대 1개 가능. 파일 1개당 제한용량 2MB",-1)),ot=u(()=>e("p",{class:"text-subtitle-1 font-weight-bold"},"000x000px로 등록 / jpg, png",-1)),st={class:"d-flex align-center justify-space-between border-dashed border-0 border-b-thin"},nt={class:"d-flex ga-2 text-body-2"},it={class:"text-disabled"},ut=u(()=>e("p",{class:"mt-4 font-weight-bold"},"내용",-1)),dt={class:"form-table"},rt=u(()=>e("colgroup",null,[e("col",{style:{width:"124px"}}),e("col"),e("col",{style:{width:"124px"}}),e("col")],-1)),ct={class:"border-b-sm text-button font-weight-bold"},Ct=u(()=>e("th",{class:"border-e-sm"},"이미지 파일",-1)),pt={class:"px-4 py-2",colspan:"3"},gt={class:"d-flex align-end ga-6"},mt=u(()=>e("input",{type:"text",hidden:""},null,-1)),bt=u(()=>e("p",null,"최대 5개 가능. 파일 1개당 제한용량 2MB",-1)),ft={class:"text-subtitle-1 font-weight-bold"},_t={class:"text-primary"},ht={class:"d-flex align-center justify-space-between border-dashed border-0 border-b-thin"},yt={class:"d-flex ga-2 text-body-2"},Ft={class:"text-disabled"},Bt={class:"border-b-sm text-button font-weight-bold"},Dt=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"답변 내용",-1)),vt={class:"px-4 py-2",colspan:"3"},xt={class:"border-b-sm text-button font-weight-bold"},It=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"유의사항",-1)),wt={class:"px-4 py-2",colspan:"3"},At=u(()=>e("p",{class:"mt-4 font-weight-bold"},"버튼",-1)),Vt={class:"form-table"},Et=u(()=>e("colgroup",null,[e("col",{style:{width:"124px"}}),e("col"),e("col",{style:{width:"124px"}}),e("col")],-1)),St={class:"border-b-sm text-button font-weight-bold"},Nt=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"버튼명",-1)),kt={class:"px-4 py-2",colspan:"3"},Pt={class:"border-b-sm text-button font-weight-bold"},qt=u(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"버튼 링크",-1)),Mt={class:"px-4 py-2",colspan:"3"};function Ut(h,s,F,l,n,p){return B(),O(T,null,[o(R,{rounded:"lg",class:"mt-4"},{default:d(()=>[e("table",qe,[Me,e("tbody",null,[e("tr",Ue,[Le,e("td",je,[o(w,{dense:""},{default:d(()=>[o(_,{cols:"6"},{default:d(()=>[o($,{items:l.parentCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:l.parentCategoryId,"onUpdate:modelValue":[s[0]||(s[0]=a=>l.parentCategoryId=a),l.onParentCategoryChange],"single-line":"",variant:"outlined","hide-details":"",disabled:F.isForDetails,placeholder:"선택"},null,8,["items","modelValue","disabled"])]),_:1}),o(_,{cols:"6"},{default:d(()=>[o($,{items:l.subCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:l.subCategoryId,"onUpdate:modelValue":[s[1]||(s[1]=a=>l.subCategoryId=a),l.onSubCategoryChange],"single-line":"",variant:"outlined","hide-details":"",placeholder:"선택"},null,8,["items","modelValue"])]),_:1})]),_:1})]),Oe,e("td",ze,[o(ve,{inline:"",modelValue:l.displayFlag,"onUpdate:modelValue":s[2]||(s[2]=a=>l.displayFlag=a),"hide-details":"auto"},{default:d(()=>[o(ee,{label:"노출",value:"Y",class:"mr-4"}),o(ee,{label:"미노출",value:"N"})]),_:1},8,["modelValue"])])]),e("tr",Te,[Re,e("td",Ye,[o(V,{variant:"outlined",density:"compact",color:"primary","hide-details":"true",placeholder:"제목을 작성해주세요.",modelValue:l.title,"onUpdate:modelValue":s[3]||(s[3]=a=>l.title=a)},null,8,["modelValue"])]),Xe,e("td",Ge,[e("label",null,x(F.postId?F.postId:"등록 후 생성"),1)])]),e("tr",He,[Je,e("td",We,[o(l.PeriodDate,{"selected-period":l.selectedPeriod,"onUpdate:selectedPeriod":s[4]||(s[4]=a=>l.selectedPeriod=a),"format-date":"yyyy.MM.dd","pub-end-date":l.pubEndDate,"onUpdate:pubEndDate":s[5]||(s[5]=a=>l.pubEndDate=a),"pub-start-date":l.pubStartDate,"onUpdate:pubStartDate":s[6]||(s[6]=a=>l.pubStartDate=a)},null,8,["selected-period","pub-end-date","pub-start-date"])]),Ze,e("td",Ke,[o(xe,{modelValue:l.pinFlag,"onUpdate:modelValue":s[7]||(s[7]=a=>l.pinFlag=a),"hide-details":"",label:"상단고정"},null,8,["modelValue"])])]),e("tr",Qe,[$e,e("td",et,[o(w,{dense:""},{default:d(()=>{var a;return[o(_,{cols:"12",md:"8"},{default:d(()=>[e("div",tt,[o(V,{readonly:"",variant:"outlined",color:"primary","hide-details":"true",placeholder:"파일을 선택하세요.",onClick:l.selectFileBanner}),lt,e("input",{accept:".png, .jpg, .jpeg",type:"file",multiple:"",hidden:"",ref:"inputFileBanner",onChange:l.onInputFileBanner},null,544),o(E,{flat:"",color:"grey100",onClick:l.selectFileBanner},{default:d(()=>[z("파일선택")]),_:1}),at])]),_:1}),o(_,{cols:"12"},{default:d(()=>[ot]),_:1}),l.props.imageFileBanner&&((a=l.props.imageFileBanner)!=null&&a.files.length)?(B(),S(_,{key:0,cols:"12"},{default:d(()=>[o(w,{dense:""},{default:d(()=>{var c;return[(B(!0),O(T,null,te((c=l.props.imageFileBanner)==null?void 0:c.files,(r,y)=>(B(),S(_,{cols:"12",md:"8",key:y+(l.isImageFile(r)?r.fileName:r.name),class:"pl-0 px-3"},{default:d(()=>[e("div",st,[e("div",nt,[e("p",null,x(l.isImageFile(r)?r.fileName:r.name),1),e("p",it,x(l.isImageFile(r)?"":l.toFileSize(r.size||0)),1)]),o(E,{flat:"",onClick:D=>l.onDeleteFileBanner(y),icon:"mdi-close",size:"small"},null,8,["onClick"])])]),_:2},1024))),128))]}),_:1})]),_:1})):le("",!0)]}),_:1})])])])])]),_:1}),ut,o(R,{rounded:"lg",class:"card mt-4"},{default:d(()=>[e("table",dt,[rt,e("tbody",null,[e("tr",ct,[Ct,e("td",pt,[o(w,{dense:""},{default:d(()=>[o(_,{cols:"12",md:"8"},{default:d(()=>[e("div",gt,[o(V,{readonly:"",variant:"outlined",color:"primary","hide-details":"true",placeholder:"파일을 선택하세요.",onClick:l.selectImageFiles}),mt,e("input",{accept:".png, .jpg, .jpeg",type:"file",multiple:"",hidden:"",ref:"inputFile",onChange:l.onInputImageFiles},null,544),o(E,{flat:"",color:"grey100",onClick:l.selectImageFiles},{default:d(()=>[z("파일선택")]),_:1}),bt])]),_:1}),o(_,{cols:"12"},{default:d(()=>[e("p",ft,[z("이미지 파일 첨부 "),e("span",_t,x(l.props.imageFiles.files.length)+"개",1)])]),_:1}),F.imageFiles&&l.props.imageFiles.files.length?(B(),S(_,{key:0,cols:"12"},{default:d(()=>[o(w,{dense:""},{default:d(()=>[(B(!0),O(T,null,te(l.props.imageFiles.files,(a,c)=>(B(),S(_,{cols:"12",md:"8",key:c+(l.isImageFile(a)?a.fileName:a.name),class:"pl-0 px-3"},{default:d(()=>[e("div",ht,[e("div",yt,[e("p",null,x(l.isImageFile(a)?a.fileName:a.name),1),e("p",Ft,x(l.isImageFile(a)?"":l.toFileSize(a.size||0)),1)]),o(E,{flat:"",onClick:r=>l.onDeleteImageFiles(c),icon:"mdi-close",size:"small"},null,8,["onClick"])])]),_:2},1024))),128))]),_:1})]),_:1})):le("",!0)]),_:1})])]),e("tr",Bt,[Dt,e("td",vt,[o(ae,{placeholder:"내용을 작성하세요.",rows:"10",modelValue:l.contents,"onUpdate:modelValue":s[8]||(s[8]=a=>l.contents=a),"hide-details":"auto"},null,8,["modelValue"])])]),e("tr",xt,[It,e("td",wt,[o(ae,{placeholder:"유의사항 내용을 작성하세요.",rows:"6",modelValue:l.note,"onUpdate:modelValue":s[9]||(s[9]=a=>l.note=a),"hide-details":"auto"},null,8,["modelValue"])])])])])]),_:1}),At,o(R,{rounded:"lg",class:"overflow-hidden mt-4"},{default:d(()=>[e("table",Vt,[Et,e("tbody",null,[e("tr",St,[Nt,e("td",kt,[o(V,{variant:"outlined",color:"primary","hide-details":"true",placeholder:"버튼명을 입력하세요",modelValue:l.btnName,"onUpdate:modelValue":s[10]||(s[10]=a=>l.btnName=a)},null,8,["modelValue"])])]),e("tr",Pt,[qt,e("td",Mt,[o(l.LandingSelect,{modelValue:l.landingLocation,"onUpdate:modelValue":s[11]||(s[11]=a=>l.landingLocation=a),options:F.landingLocationOpts},null,8,["modelValue","options"])])])])])]),_:1})],64)}const Jt=De(Pe,[["render",Ut],["__scopeId","data-v-be708bc7"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/components/EventForm/EventForm.vue"]]);export{Jt as E};
