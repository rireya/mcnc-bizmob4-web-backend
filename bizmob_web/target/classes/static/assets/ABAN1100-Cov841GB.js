import{d as P,E as I,j as m,p as L,a8 as k,l as U,k as D,_ as V,o as h,e as q,a as i,w as d,H as z,a2 as j,I as w,g as F,h as S}from"./index-C5K_s1wl.js";import{B as W}from"./BaseBreadcrumb-DEdlJy1-.js";import{B as G}from"./BannerForm-C6PZ5g-y.js";import{a as J}from"./useNetwork-BBZmMd-V.js";import{b as c}from"./common-AUcBvRqL.js";import{u as K}from"./useBannerMgmt-Citl6Y3L.js";import{f as _}from"./utils-CFlAkpuO.js";import"./PeriodDate-Y1bD6Y6f.js";import"./format-CimBkJP1.js";import"./LandingSelect-DityfkCS.js";import"./useCommonCode-DIzdSdac.js";const Q=P({__name:"ABAN1100",setup(O,{expose:t}){t();const f=I(),{confirm:e}=J(),E=m({title:"홈 롤링배너 상세"}),N=m([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"배너 관리",disabled:!1,href:"/admin/banner"},{text:"홈 롤링배너 관리",disabled:!1,href:"/admin/rolling-banners"},{text:"홈 롤링배너 상세",disabled:!0,href:"#"}]);L(()=>{A()});const{deleteBanner:n,bannerDetail:v,updateBanner:x}=K(),p=k(),y=m(),Y=U(()=>{var r;return(r=y.value)==null?void 0:r.isFormValid()}),o=D({startDate:new Date().toISOString(),endDate:null,noEndDate:!0}),b=m("N"),B=m(1),l=D({}),u=D({type:null,value:null});let g="",s=null;const M=async()=>{const{role:r}=await e("삭제하시겠습니까?","삭제","취소");if(r!="confirm")return;const a=await n(c.HOME_ROLL,""+p.params.seq);a&&a.status&&f.push("/rolling-banners")},A=async()=>{const{status:r,data:a}=await v(c.HOME_ROLL,String(p.params.seq));r&&(o.startDate=a.pubStartDate,o.endDate=a.pubEndDate,o.noEndDate=!o.endDate,b.value=a.displayFlag,a.imageFile&&(s=a.imageFile,l.file={name:a.imageFile.fileName,size:a.imageFile.fileSize,uid:a.imageFile.attachId},l.imageUrl=a.imageFile.filePath),B.value=Number(a.rollingSortOrder),u.type=a.landingType,u.value=a.landingSpot,g=_(a.pubStartDate,"HH:mm:ss"))},C={router:f,confirm:e,page:E,breadcrumbs:N,deleteBanner:n,bannerDetail:v,updateBanner:x,route:p,BannerFormRef:y,enable:Y,postingPeriod:o,exposed:b,order:B,file:l,landing:u,get pubStartTime(){return g},set pubStartTime(r){g=r},get imageInfo(){return s},set imageInfo(r){s=r},onDeleteBanner:M,reqRollBannerDetails:A,onSave:async()=>{var R;const r=l.file instanceof File?{attachId:(s==null?void 0:s.attachId)??"",fileName:l.file.name,filePath:"",orderNo:0,fileSize:l.file.size}:null,a={docId:String(p.params.seq),displayFlag:b.value,deleteImageFileId:(R=l.deleteFile)==null?void 0:R.uid,pubAlwaysFlag:o.noEndDate?"Y":"N",pubStartDate:_(o.startDate,"YYYY-MM-DD[T]")+g,pubEndDate:o.endDate?_(o.endDate,"YYYY-MM-DD[T]HH:mm:ss"):null,imageFile:r,landingType:u.type,landingSpot:u.value,rollingSortOrder:B.value.toString()},T=l.file instanceof File?l.file:{},{status:H}=await x(c.HOME_ROLL,a,T);H&&f.push("/rolling-banners")},BaseBreadcrumb:W,get BannerForm(){return G},get BANNER_TYPE(){return c}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}});function X(O,t,f,e,E,N){return h(),q(j,null,[i(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),i(z,null,{default:d(()=>[i(w,{cols:"12"},{default:d(()=>[i(e.BannerForm,{file:e.file,"onUpdate:file":t[0]||(t[0]=n=>e.file=n),"posting-period":e.postingPeriod,"onUpdate:postingPeriod":t[1]||(t[1]=n=>e.postingPeriod=n),exposed:e.exposed,"onUpdate:exposed":t[2]||(t[2]=n=>e.exposed=n),order:e.order,"onUpdate:order":t[3]||(t[3]=n=>e.order=n),ref:"BannerFormRef",landing:e.landing,"onUpdate:landing":t[4]||(t[4]=n=>e.landing=n),type:e.BANNER_TYPE.HOME_ROLL},null,8,["file","posting-period","exposed","order","landing","type"])]),_:1}),i(w,{cols:"12",class:"d-flex justify-space-between"},{default:d(()=>[i(F,{flat:"",color:"error",onClick:t[5]||(t[5]=n=>e.onDeleteBanner())},{default:d(()=>[S("삭제")]),_:1}),i(F,{flat:"",color:"grey100",onClick:t[6]||(t[6]=n=>e.router.push("/rolling-banners"))},{default:d(()=>[S("목록 이동")]),_:1}),i(F,{flat:"",color:"grey200",disabled:!e.enable,onClick:e.onSave},{default:d(()=>[S("저장")]),_:1},8,["disabled"])]),_:1})]),_:1})],64)}const ue=V(Q,[["render",X],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABAN/ABAN1100.vue"]]);export{ue as default};
