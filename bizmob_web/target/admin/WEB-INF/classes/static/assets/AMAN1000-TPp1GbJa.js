import{d as q,as as Z,j as p,l as E,p as G,B as $,_ as J,o as b,c as I,w as o,a as n,J as N,af as M,e as L,f as t,U as h,M as U,ak as ee,al as O,a4 as te,g as y,h as x,at as se,ad as ne,au as ae,k as oe,Q as de,H as ie,a2 as le,I as z,T as ue}from"./index-C5K_s1wl.js";import{B as re}from"./BaseBreadcrumb-DEdlJy1-.js";import{T as ce}from"./TreeView-jP6dCXnk.js";import{f as Q}from"./utils-CFlAkpuO.js";import{u as me}from"./useModal-YcZHZcUY.js";import{u as _e,a as fe}from"./useNetwork-BBZmMd-V.js";const he=q({__name:"AMAN1100",props:{instance:{type:Z},modify:Boolean,menuPath:String,menuId:String,menuName:String,menuURL:String,menuDescription:String,menuActivation:String,registerDate:String},emits:["close"],setup(w,{expose:c,emit:u}){c();const e=w,D=u,_=p(e.menuName??""),r=p(e.menuURL??""),f=p(e.menuDescription??""),C=p(e.menuActivation??"N"),B=p(e.registerDate??""),s=E(()=>!_.value.trim()),R=E(()=>A=>A?Q(A,"YYYY/MM/DD HH:mm:ss"):"");G(()=>{e.instance&&e.instance.dispatchMounted()}),$(()=>{e.instance&&e.instance.dispatchUnmounted()});const v={props:e,emit:D,menuName:_,menuURL:r,menuDescription:f,menuActivation:C,registerDate:B,disabled:s,formatDate:R,confirm:()=>{e.instance&&e.instance.dismiss({menuName:_.value,menuURL:r.value,menuDescription:f.value,menuActivation:C.value,menuId:e.menuId},"confirm")},deletMenu:()=>{e.instance&&e.instance.dismiss({menuId:e.menuId},"delete")}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),be={key:0,class:"text-h6 font-weight-bold"},pe={key:1,class:"text-h6 font-weight-bold"},Ce={class:"form-table"},De=t("colgroup",null,[t("col",{style:{width:"124px"}}),t("col")],-1),Be={class:"border-b-sm"},Ae=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 위치",-1),xe={class:"pl-4"},ye={class:"border-b-sm"},ge=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 ID",-1),Ie={class:"px-3"},Ne={class:"border-b-sm"},Me=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴명",-1),we={class:"px-3"},ve={class:"border-b-sm"},Ve=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 URL",-1),ke={class:"px-3"},Ue={class:"border-b-sm"},Le=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 설명",-1),Re={class:"px-3"},Se={class:""},Ye=t("th",{class:"pa-4 border-e-sm text-start"},"상태",-1),Te={class:"px-3"},Ee={key:0,class:"border-t-sm"},Pe=t("th",{class:"pa-4 border-e-sm text-start"},"등록일시",-1),je={class:"px-3"},He={class:"d-flex justify-space-between pt-4 border-t-sm"};function Fe(w,c,u,e,D,_){return b(),I(ae,{"max-width":"800","model-value":u.instance&&u.instance.active,onAfterLeave:c[4]||(c[4]=r=>e.emit("close")),persistent:u.instance&&u.instance.persistent,class:ne(u.instance&&u.instance.cssClass)},{default:o(()=>[n(N,{rounded:"xl",elevation:"0"},{default:o(()=>[n(M,{class:"pa-4"},{default:o(()=>[u.modify?(b(),L("p",be,"메뉴 수정")):(b(),L("p",pe,"메뉴 추가")),n(N,{class:"my-4 overflow-hidden border-sm",elevation:"0",rounded:"lg"},{default:o(()=>[n(M,{class:"pa-0"},{default:o(()=>[t("table",Ce,[De,t("tbody",null,[t("tr",Be,[Ae,t("td",xe,h(u.menuPath),1)]),t("tr",ye,[ge,t("td",Ie,[n(U,{"hide-details":"auto",value:u.menuId,class:"w-sm-50",density:"compact",disabled:""},null,8,["value"])])]),t("tr",Ne,[Me,t("td",we,[n(U,{"hide-details":"auto",class:"w-sm-50",density:"compact",modelValue:e.menuName,"onUpdate:modelValue":c[0]||(c[0]=r=>e.menuName=r)},null,8,["modelValue"])])]),t("tr",ve,[Ve,t("td",ke,[n(U,{"hide-details":"auto",density:"compact",modelValue:e.menuURL,"onUpdate:modelValue":c[1]||(c[1]=r=>e.menuURL=r)},null,8,["modelValue"])])]),t("tr",Ue,[Le,t("td",Re,[n(U,{"hide-details":"auto",density:"compact",modelValue:e.menuDescription,"onUpdate:modelValue":c[2]||(c[2]=r=>e.menuDescription=r)},null,8,["modelValue"])])]),t("tr",Se,[Ye,t("td",Te,[n(ee,{inline:"","hide-details":"auto",density:"compact",modelValue:e.menuActivation,"onUpdate:modelValue":c[3]||(c[3]=r=>e.menuActivation=r)},{default:o(()=>[n(O,{label:"활성",value:"Y",class:"mr-4"}),n(O,{label:"비활성",value:"N"})]),_:1},8,["modelValue"])])]),u.modify?(b(),L("tr",Ee,[Pe,t("td",je,h(e.formatDate(e.registerDate)),1)])):te("",!0)])])]),_:1})]),_:1}),t("div",He,[u.menuId?(b(),I(y,{key:0,flat:"",color:"error",onClick:e.deletMenu},{default:o(()=>[x("삭제")]),_:1})):(b(),I(se,{key:1})),u.modify?(b(),I(y,{key:2,flat:"",color:"grey200",onClick:e.confirm,disabled:e.disabled},{default:o(()=>[x("수정 완료")]),_:1},8,["disabled"])):(b(),I(y,{key:3,flat:"",color:"grey200",onClick:e.confirm,disabled:e.disabled},{default:o(()=>[x("추가 완료")]),_:1},8,["disabled"]))])]),_:1})]),_:1})]),_:1},8,["model-value","persistent","class"])}const W=J(he,[["render",Fe],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/AMAN/AMAN1100.vue"]]),Oe=q({__name:"AMAN1000",setup(w,{expose:c}){c();const u=p({title:"메뉴 관리"}),e=p([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"관리자 기능",disabled:!1,href:"/admin/menu"},{text:"메뉴 관리",disabled:!0,href:"#"}]),D=me(),_=_e(),{alert:r}=fe(),f=E(()=>d=>d?Q(d,"YYYY/MM/DD HH:mm:ss"):""),C=p(),B=p([]),s=oe({location:"",registerDate:"",lastModify:"",url:"",desc:"",active:"",menuId:"",menuName:""}),R=async()=>{const d=await D.create({component:W,componentProps:{menuPath:s.location,menuId:s.menuId}});await d.present();const{role:i,data:a}=await d.onUnmounted();if(i==="delete")return A(a.menuId);if(i!="confirm")return;if(!(a!=null&&a.menuName)){r("메뉴 이름을 입력해 주세요");return}const{status:m}=await _.post({url:"/menu/register",body:{parentMenuId:s.menuId??null,menuName:a.menuName,menuUrl:a.menuURL,description:a.menuDescription,status:a.menuActivation==="Y"?"1":"0"}});m&&g()},P=async()=>{const d=await D.create({component:W,componentProps:{modify:!0,menuPath:s.location,menuId:s.menuId,menuName:s.menuName,menuURL:s.url,menuDescription:s.desc,menuActivation:s.active,registerDate:s.registerDate}});d.present();const{role:i,data:a}=await d.onUnmounted();if(i==="delete")A(a.menuId);else if(i==="confirm"){if(!(a!=null&&a.menuName)){r("메뉴 이름을 입력해 주세요");return}S(a.menuId,a.menuName,a.menuURL,a.menuDescription,a.menuActivation)}},S=async(d,i,a,m,Y)=>{const{status:k}=await _.post({url:"/menu/update",body:{menuId:d,menuName:i,menuUrl:a,description:m,status:Y==="Y"?"1":"0"}});k&&g()},v=()=>{s.menuId&&A(s.menuId)},A=async d=>{const{status:i}=await _.post({url:"/menu/delete",body:{menuId:d}});i&&(g(),V())},K=d=>{var i;s.menuId!==d.id&&(s.menuId=""+d.id,H(s.menuId,((i=d.customData)==null?void 0:i.location)??""))},X=()=>{V()},j=d=>{var m;const i=(m=C.value)==null?void 0:m.getExpandedItems(),a=(Y,k)=>Y.map(l=>{const T=(k?k+" > ":"")+l.menuName;return s.menuId&&l.menuId===s.menuId&&(s.menuName=l.menuName,s.location=T,s.registerDate=l.createDate,s.lastModify=l.updateDate,s.url=l.menuUrl,s.desc=l.description,s.active=l.status==="1"?"Y":"N"),{id:l.menuId,label:l.menuName,state:i&&i.includes(l.menuId)?{expanded:!0}:void 0,customData:{location:T,registerDate:l.createDate,lastModify:l.updateDate,url:l.menuUrl,desc:l.description,active:l.status==="1"?"Y":"N"},children:l.subMenuList?a(l.subMenuList,T):void 0}});B.value=a(d.menuList)},g=async()=>{const{status:d,data:i}=await _.post({url:"/menu/list"});d&&j(i)},V=()=>{s.menuId="",s.menuName="",s.location="",s.registerDate="",s.lastModify="",s.url="",s.desc="",s.active=""},H=async(d,i)=>{const{status:a,data:m}=await _.post({url:"/menu/detail",body:{menuId:d}});if(!a)return V();s.menuId=m.menuId,s.menuName=m.menuName,s.location=i,s.registerDate=m.createDate,s.lastModify=m.updateDate??"",s.url=m.menuUrl,s.desc=m.description,s.active=m.status==="1"?"Y":"N"};G(()=>{g()});const F={page:u,breadcrumbs:e,modal:D,network:_,alert:r,formatDate:f,treeRef:C,treeList:B,menu:s,addMenuBtn:R,editBtn:P,editMenu:S,deleteBtn:v,deleteMenu:A,onTreeClick:K,onClickOutSideTree:X,mappingList:j,reqMenuList:g,resetDetails:V,setDetails:H,BaseBreadcrumb:re,TreeView:ce};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),ze=t("p",{class:"text-h6 font-weight-bold mb-4"},"메뉴 목록",-1),We={class:"d-flex justify-end mt-2 ga-2"},qe=t("p",{class:"text-h6 font-weight-bold mb-4"},"메뉴 상세 정보",-1),Ge={class:"form-table"},Je=t("colgroup",null,[t("col",{style:{width:"124px"}}),t("col")],-1),Qe={class:"border-b-sm"},Ke=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 위치",-1),Xe={class:"pl-3"},Ze={class:"border-b-sm"},$e=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 ID",-1),et={class:"pl-3"},tt={class:"border-b-sm"},st=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴명",-1),nt={class:"pl-3"},at={class:"border-b-sm"},ot=t("th",{class:"pa-4 border-e-sm text-start"},"상태",-1),dt={class:"pl-3"},it={class:"border-b-sm"},lt=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 URL",-1),ut={class:"pl-3"},rt={class:"border-b-sm"},ct=t("th",{class:"pa-4 border-e-sm text-start"},"메뉴 설명",-1),mt={class:"pl-3"},_t={class:"border-b-sm"},ft=t("th",{class:"pa-4 border-e-sm text-start"},"등록일시",-1),ht={class:"pl-3"},bt=t("th",{class:"pa-4 border-e-sm text-start"},"마지막 수정일시",-1),pt={class:"pl-3"},Ct={class:"d-flex justify-space-between mt-2"};function Dt(w,c,u,e,D,_){const r=de("perfect-scrollbar");return b(),L(le,null,[n(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),n(ie,{class:"mt-4"},{default:o(()=>[n(z,{cols:"4"},{default:o(()=>[ze,n(N,{rounded:"lg"},{default:o(()=>[n(M,{class:"pa-3"},{default:o(()=>[n(N,null,{default:o(()=>[n(M,{class:"pa-2"},{default:o(()=>[n(r,{style:{height:"590px"},onClick:e.onClickOutSideTree},{default:o(()=>[n(e.TreeView,{listItem:e.treeList,onClick:e.onTreeClick,ref:"treeRef",selected:e.menu.menuId},{icon:o(f=>[n(ue,{class:"cursor-pointer",size:"large"},{default:o(()=>{var C,B;return[x(h(f.children&&f.children.length||(C=f==null?void 0:f.customData)!=null&&C.root?(B=f.state)!=null&&B.expanded?"mdi-folder-open-outline ":"mdi-folder-outline":"mdi-file"),1)]}),_:2},1024)]),_:1},8,["listItem","selected"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t("div",We,[n(y,{flat:"",color:"grey200",onClick:e.addMenuBtn},{default:o(()=>[x("메뉴 추가")]),_:1})])]),_:1}),n(z,{cols:"8"},{default:o(()=>[qe,n(N,{rounded:"lg",class:"overflow-hidden"},{default:o(()=>[n(M,{class:"pa-0"},{default:o(()=>[t("table",Ge,[Je,t("tbody",null,[t("tr",Qe,[Ke,t("td",Xe,h(e.menu.location),1)]),t("tr",Ze,[$e,t("td",et,h(e.menu.menuId),1)]),t("tr",tt,[st,t("td",nt,h(e.menu.menuName),1)]),t("tr",at,[ot,t("td",dt,h(e.menu.active?e.menu.active==="Y"?"활성":"비활성":""),1)]),t("tr",it,[lt,t("td",ut,h(e.menu.url),1)]),t("tr",rt,[ct,t("td",mt,h(e.menu.desc),1)]),t("tr",_t,[ft,t("td",ht,h(e.formatDate(e.menu.registerDate)),1)]),t("tr",null,[bt,t("td",pt,h(e.formatDate(e.menu.lastModify)),1)])])])]),_:1})]),_:1}),t("div",Ct,[n(y,{flat:"",color:"error",onClick:e.deleteBtn,disabled:!e.menu.menuId},{default:o(()=>[x("삭제")]),_:1},8,["disabled"]),n(y,{flat:"",color:"grey200",onClick:e.editBtn,disabled:!e.menu.menuId},{default:o(()=>[x("수정")]),_:1},8,["disabled"])])]),_:1})]),_:1})],64)}const Nt=J(Oe,[["render",Dt],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/AMAN/AMAN1000.vue"]]);export{Nt as default};
