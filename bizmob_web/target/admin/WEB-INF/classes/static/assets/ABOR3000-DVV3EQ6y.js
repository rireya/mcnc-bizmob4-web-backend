import{d as se,p as ne,E as ue,a8 as de,j as d,l as G,s as re,_ as ie,o as J,e as ce,a as t,w as o,H as R,a2 as me,I as v,J as W,f as s,aj as U,ak as Ce,al as N,M as pe,g as x,h as i,U as I,am as fe,c as ve,an as be,a4 as ge,ao as ye,O as De,P as he}from"./index-C5K_s1wl.js";import{B as _e}from"./BaseBreadcrumb-DEdlJy1-.js";import{u as we,a as Be}from"./useNetwork-BBZmMd-V.js";import{a as xe,D as Ie}from"./DateFilter-dRZ_ZuWr.js";import{f as K}from"./utils-CFlAkpuO.js";import{P as Ve}from"./Pagination-CMt1YS54.js";import{u as Se}from"./useCommonCode-DIzdSdac.js";import{B as ke}from"./common-AUcBvRqL.js";import{T as Fe}from"./TableEmptyState-DTIE6Crm.js";import"./format-CimBkJP1.js";const Ee=se({__name:"ABOR3000",setup(b,{expose:n}){n(),ne(()=>{q(),f(!0)});const{getBoardCategory:V}=Se(),e=we(),_=ue(),L=de(),{confirm:a}=Be(),Q=d({title:"하이패스 인포"}),X=d([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/contents"},{text:"하이패스 인포",disabled:!0,href:"#"}]),Z=[{title:"No",value:"no",align:"center",width:"6%"},{title:"공지 제목",value:"title",align:"left"},{title:"카테고리",value:"parentCategoryName",align:"center",width:"10%"},{title:"노출여부",value:"displayFlag",align:"center",width:"10%"},{title:"ID",value:"metaDocId",align:"center",width:"14%"},{title:"등록일",value:"createDate",align:"center",width:"14%"}],S=d(null),k=d(null),g=d(null),F=d(""),H=xe(),O=d(H[0].value),c=d(!1),C=d([]),p=d(1),w=d(0),M=d(0),B=d(10),E=d([]),$=l=>K(new Date(l),"yyyy.MM.DD"),y=d([]),j=G(()=>[{text:"전체",value:null},...y.value.map(l=>({text:l.codeName,value:l.codeId}))]),m=d([{text:"전체",value:null}]),Y=d(j.value[0].value),D=d(m.value[0].value),q=async()=>{const l=await V(ke.HIPASSINFO);if(!l)return;y.value=l.categoryList,m.value=[{text:"전체",value:null}];const u=y.value[0];u.subCommonCodeList&&u.subCommonCodeList.length&&m.value.push(...u.subCommonCodeList.map(r=>({text:r.codeName,value:r.codeId})))},ee=l=>{if(!l)return;const u=y.value.find(r=>r.codeId===l);u&&(m.value=[{text:"전체",value:null}],u.subCommonCodeList&&u.subCommonCodeList.length&&m.value.push(...u.subCommonCodeList.map(r=>({text:r.codeName,value:r.codeId}))),D.value&&m.value.findIndex(r=>r.value===D.value)<0&&(D.value=null))},te=G({get:()=>g.value===null?"":g.value,set:l=>{g.value=l===""?null:l}}),ae=()=>{p.value===1?f():p.value=1};function A(l,u=!1){if(!l)return null;const r=new Date(l);return u?r.setHours(23,59,59,999):r.setHours(0,0,0,0),K(r,"yyyy-MM-DDTHH:mm:ss")}re(p,()=>{f()});const f=async(l=!1)=>{const u=S.value||k.value?{periodType:"PUB",periodStartDate:A(S.value)||null,periodEndDate:A(k.value,!0)||null}:null,r=F.value?{keywordType:O.value,keyword:F.value}:null;c.value=!0;const{status:P,data:T}=await e.post({url:"/board/hipassinfo/list",isLoading:l,body:{pageNo:p.value,pageSize:B.value,subCategoryId:D.value,parentCategoryId:Y.value,periodSerarch:u,keywordSearch:r,displayFlag:g.value}});return c.value=!1,P?(C.value=[],E.value=T.hipassInfoDocs,w.value=T.totalCnt,M.value=Math.ceil(w.value/B.value),E.value=T.hipassInfoDocs.map((le,oe)=>({...le,no:w.value-(p.value-1)*B.value-oe})),!0):!1},z={getBoardCategory:V,network:e,router:_,route:L,confirm:a,page:Q,breadcrumbs:X,tableHeader:Z,pubStartDate:S,pubEndDate:k,displayFlag:g,keyword:F,querySelectionItems:H,keywordType:O,loading:c,selectedRows:C,currentPage:p,totalCnt:w,totalPages:M,pageSize:B,contentBoardDocs:E,formatCreatedDate:$,categoryList:y,parentCategoryItems:j,subCategoryItems:m,parentCategoryId:Y,subCategoryId:D,getCategorySelection:q,onParentCategoryChange:ee,selectedDisplayFlag:te,searchContent:ae,formatToISO:A,reqContent:f,openDetail:(l,{item:u})=>{_.push({path:`/contents/${u.metaDocId}`})},registerContent:()=>{_.push({path:"/contents/register"})},selectUnexposedItem:async()=>{const{role:l}=await a("정말로 이 항목을 모두 공개하시겠습니까?","공개","취소");if(l!="confirm")return;const u=C.value.map(P=>({metaDocId:P,displayFlag:"Y"}));c.value=!0;const{status:r}=await e.post({url:"/board/hipassinfo/set/display/list",isLoading:!0,body:{docList:u}});c.value=!1,r&&(C.value=[],await f())},deleteContents:async()=>{const{role:l}=await a("삭제하시겠습니까?","삭제","취소");if(l!="confirm")return;c.value=!0;const{status:u}=await e.post({url:"/board/hipassinfo/delete/list",isLoading:!0,body:{metaDocIds:C.value}});c.value=!1,u&&(C.value=[],await f())},BaseBreadcrumb:_e,DateFilter:Ie,Pagination:Ve,get TableEmptyState(){return Fe}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),h=b=>(De("data-v-f46e2b81"),b=b(),he(),b),Ae={class:"form-table"},Pe=h(()=>s("colgroup",null,[s("col",{style:{width:"124px"}}),s("col"),s("col",{style:{width:"124px"}}),s("col")],-1)),Te={class:"border-b-sm"},Re=h(()=>s("th",{class:"border-e-sm text-button font-weight-bold"},"카테고리",-1)),Ue={class:"px-4 py-2"},Ne=h(()=>s("th",{class:"border-e-sm text-button font-weight-bold"},"등록일자",-1)),Le={class:"px-4 py-2 d-flex"},He=h(()=>s("th",{class:"border-e-sm text-button font-weight-bold"},"노출여부",-1)),Oe={class:"px-4 py-2"},Me=h(()=>s("th",{class:"text-button font-weight-bold"},"검색어",-1)),je={class:"px-4 py-2"},Ye={class:"d-flex justify-sm-end ga-2"},qe={class:"font-weight-bold"},ze={class:"d-flex justify-space-between align-center mt-2 mb-3 px-6"},Ge={class:"d-flex justify-sm-end ga-2"};function Je(b,n,V,e,_,L){return J(),ce(me,null,[t(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),t(R,null,{default:o(()=>[t(v,{cols:"12"},{default:o(()=>[t(W,{rounded:"lg",class:"mt-4"},{default:o(()=>[s("table",Ae,[Pe,s("tbody",null,[s("tr",Te,[Re,s("td",Ue,[t(R,{dense:""},{default:o(()=>[t(v,{cols:"6"},{default:o(()=>[t(U,{items:e.parentCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:e.parentCategoryId,"onUpdate:modelValue":[n[0]||(n[0]=a=>e.parentCategoryId=a),e.onParentCategoryChange],"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1}),t(v,{cols:"6"},{default:o(()=>[t(U,{items:e.subCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:e.subCategoryId,"onUpdate:modelValue":n[1]||(n[1]=a=>e.subCategoryId=a),"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1})]),_:1})]),Ne,s("td",Le,[t(e.DateFilter,{"pub-end-date":e.pubEndDate,"onUpdate:pubEndDate":n[2]||(n[2]=a=>e.pubEndDate=a),"pub-start-date":e.pubStartDate,"onUpdate:pubStartDate":n[3]||(n[3]=a=>e.pubStartDate=a)},null,8,["pub-end-date","pub-start-date"])])]),s("tr",null,[He,s("td",Oe,[t(Ce,{inline:"",modelValue:e.selectedDisplayFlag,"onUpdate:modelValue":n[4]||(n[4]=a=>e.selectedDisplayFlag=a),"hide-details":"auto"},{default:o(()=>[t(N,{label:"전체",value:"",class:"mr-4"}),t(N,{label:"노출",value:"Y",class:"mr-4"}),t(N,{label:"미노출",value:"N"})]),_:1},8,["modelValue"])]),Me,s("td",je,[t(R,{dense:""},{default:o(()=>[t(v,{cols:"4",md:"3"},{default:o(()=>[t(U,{items:e.querySelectionItems,"item-title":"text","item-value":"value",modelValue:e.keywordType,"onUpdate:modelValue":n[5]||(n[5]=a=>e.keywordType=a),"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1}),t(v,{cols:"8",md:"6"},{default:o(()=>[t(pe,{variant:"outlined",color:"primary","hide-details":"true",modelValue:e.keyword,"onUpdate:modelValue":n[6]||(n[6]=a=>e.keyword=a),placeholder:"검색어를 입력하세요."},null,8,["modelValue"])]),_:1})]),_:1})])])])])]),_:1}),s("div",Ye,[t(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"secondary",onClick:e.searchContent,variant:"outlined"},{default:o(()=>[i("검색")]),_:1})])]),_:1}),t(v,{cols:"12"},{default:o(()=>[s("p",qe,"총 "+I(e.totalCnt)+"개",1),t(W,{rounded:"lg",class:"card mt-4"},{default:o(()=>[t(fe,{loading:e.loading,headers:e.tableHeader,itemsLength:10,items:e.contentBoardDocs,"item-value":"metaDocId","show-select":"",modelValue:e.selectedRows,"onUpdate:modelValue":n[8]||(n[8]=a=>e.selectedRows=a),"onClick:row":e.openDetail},{"no-data":o(()=>[t(e.TableEmptyState)]),"item.title":o(({item:a})=>[i(I(a.title)+" ",1),a.pinFlag==="Y"?(J(),ve(be,{key:0,class:"chip"},{default:o(()=>[i("상단고정")]),_:1})):ge("",!0)]),"item.displayFlag":o(({value:a})=>[i(I(a==="Y"?"노출":"미노출"),1)]),"item.createDate":o(({item:a})=>[i(I(e.formatCreatedDate(a.createDate)),1)]),bottom:o(()=>[t(ye),s("div",ze,[s("div",Ge,[t(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"grey100",onClick:e.selectUnexposedItem},{default:o(()=>[i("선택 미노출")]),_:1}),t(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"error",disabled:!e.selectedRows.length,onClick:e.deleteContents},{default:o(()=>[i("삭제")]),_:1},8,["disabled"])]),t(e.Pagination,{class:"d-flex align-center ml-4 elevation-0",modelValue:e.currentPage,"onUpdate:modelValue":n[7]||(n[7]=a=>e.currentPage=a),length:e.totalPages,"total-visible":7},null,8,["modelValue","length"]),t(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"grey200",onClick:e.registerContent},{default:o(()=>[i("하이패스 인포 등록")]),_:1})])]),_:2},1032,["loading","items","modelValue"])]),_:1})]),_:1})]),_:1})],64)}const dt=ie(Ee,[["render",Je],["__scopeId","data-v-f46e2b81"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR3000.vue"]]);export{dt as default};
