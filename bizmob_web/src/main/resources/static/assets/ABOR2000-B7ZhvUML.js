import{d as se,p as ne,E as de,j as d,l as W,s as re,_ as ue,o as K,e as ie,a,w as o,H as R,a2 as ce,I as _,J as Q,f as s,aj as X,ak as me,al as A,M as pe,g as x,h as i,U as C,am as ve,c as Ce,an as fe,a4 as be,ao as ye,O as ge,P as De}from"./index-C5K_s1wl.js";import{B as he}from"./BaseBreadcrumb-DEdlJy1-.js";import{u as _e,a as we}from"./useNetwork-BBZmMd-V.js";import{a as Be,g as xe,D as Ve}from"./DateFilter-dRZ_ZuWr.js";import{P as Ie}from"./Pagination-CMt1YS54.js";import{f as U}from"./utils-CFlAkpuO.js";import{B as Ee}from"./common-AUcBvRqL.js";import{u as Se}from"./useCommonCode-DIzdSdac.js";import{T as ke}from"./TableEmptyState-DTIE6Crm.js";import"./format-CimBkJP1.js";const Fe=se({__name:"ABOR2000",setup(f,{expose:n}){n(),ne(()=>{z(),v(!0)});const b=_e(),e=de(),{confirm:B}=we(),{getBoardCategory:V}=Se(),t=d({title:"이벤트"}),Z=d([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/notices"},{text:"이벤트",disabled:!0,href:"#"}]),$=[{title:"이벤트 제목",value:"title",align:"left"},{title:"유형",value:"parentCategoryName",align:"center",width:"14%"},{title:"노출여부",value:"displayFlag",align:"center",width:"14%"},{title:"게시기간",value:"postPeriod",align:"center",width:"14%"},{title:"ID",value:"headDocId",align:"center",width:"14%"},{title:"등록일",value:"createDate",align:"center",width:"14%"}],y=d(null),I=d(""),L=Be(),N=d(L[0].value),H=xe(),M=d(H[0].value),E=d(null),S=d(null),ee=l=>U(new Date(l),"yyyy.MM.DD"),te=l=>U(new Date(l),"yyyy.MM.DD HH:mm"),c=d(!1),p=d([]),g=d(1),k=d(0),O=d(0),F=d(10),j=d([]),ae=W({get:()=>y.value===null?"":y.value,set:l=>{y.value=l===""?null:l}}),D=d([]),Y=W(()=>[{text:"전체",value:null},...D.value.map(l=>({text:l.codeName,value:l.codeId}))]),m=d([{text:"전체",value:null}]),q=d(Y.value[0].value),h=d(m.value[0].value),z=async()=>{const l=await V(Ee.EVENTBOARD);if(!l)return;D.value=l.categoryList,m.value=[{text:"전체",value:null}];const r=D.value[0];r.subCommonCodeList&&r.subCommonCodeList.length&&m.value.push(...r.subCommonCodeList.map(u=>({text:u.codeName,value:u.codeId})))},le=l=>{if(!l)return;const r=D.value.find(u=>u.codeId===l);r&&(m.value=[{text:"전체",value:null}],r.subCommonCodeList&&r.subCommonCodeList.length&&m.value.push(...r.subCommonCodeList.map(u=>({text:u.codeName,value:u.codeId}))),h.value&&m.value.findIndex(u=>u.value===h.value)<0&&(h.value=null))},oe=()=>{g.value===1?v():g.value=1};re(g,()=>{v()});const v=async(l=!1)=>{const r=E.value||S.value?{periodType:M.value,periodStartDate:T(E.value)||null,periodEndDate:T(S.value,!0)||null}:null,u=I.value?{keywordType:N.value,keyword:I.value}:null;c.value=!0;const{status:P,data:J}=await b.post({url:"/board/eventboard/list",isLoading:l,body:{pageNo:g.value,pageSize:F.value,parentCategoryId:q.value,subCategoryId:h.value,periodSerarch:r,keywordSearch:u,displayFlag:y.value}});return c.value=!1,P?(p.value=[],j.value=J.eventBoardDocs,k.value=J.totalCnt,O.value=Math.ceil(k.value/F.value),!0):!1};function T(l,r=!1){if(!l)return null;const u=new Date(l);return r?u.setHours(23,59,59,999):u.setHours(0,0,0,0),U(u,"yyyy-MM-DDTHH:mm:ss")}const G={network:b,router:e,confirm:B,getBoardCategory:V,page:t,breadcrumbs:Z,tableHeader:$,displayFlag:y,keyword:I,querySelectionItems:L,keywordType:N,postSelectionPeriod:H,periodType:M,pubStartDate:E,pubEndDate:S,formatCreatedDate:ee,formatDatePeriod:te,loading:c,selectedRows:p,currentPage:g,totalCnt:k,totalPages:O,pageSize:F,eventBoardDocs:j,selectedDisplayFlag:ae,categoryList:D,parentCategoryItems:Y,subCategoryItems:m,parentCategoryId:q,subCategoryId:h,getCategorySelection:z,onParentCategoryChange:le,searchEvent:oe,reqEvents:v,formatToISO:T,openDetail:(l,{item:r})=>{e.push({path:`/events/${r.headDocId}`})},registerEvent:()=>{e.push({path:"/events/register"})},selectUnexposedItem:async()=>{const{role:l}=await B("정말로 이 항목을 모두 공개하시겠습니까?","공개","취소");if(l!="confirm")return;const r=p.value.map(P=>({headDocId:P,displayFlag:"Y"}));c.value=!0;const{status:u}=await b.post({url:"/board/eventboard/set/display/list",isLoading:!0,body:{docList:r}});c.value=!1,u&&(p.value=[],await v())},deleteEvents:async()=>{const{role:l}=await B("삭제하시겠습니까?","삭제","취소");if(l!="confirm")return;c.value=!0;const{status:r}=await b.post({url:"/board/eventboard/delete/list",isLoading:!0,body:{headDocIds:p.value}});c.value=!1,r&&(p.value=[],await v())},BaseBreadcrumb:he,DateFilter:Ve,Pagination:Ie,get TableEmptyState(){return ke}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),w=f=>(ge("data-v-08d8d7e7"),f=f(),De(),f),Te={class:"form-table"},Pe=w(()=>s("colgroup",null,[s("col",{style:{width:"124px"}}),s("col"),s("col",{style:{width:"124px"}}),s("col")],-1)),Re={class:"border-b-sm"},Ae=w(()=>s("th",{class:"border-e-sm text-button font-weight-bold"},"유형",-1)),Ue={class:"px-4 py-2"},Le=w(()=>s("th",{class:"border-e-sm text-button font-weight-bold"},"등록일자",-1)),Ne={class:"px-4 py-2 d-flex"},He=w(()=>s("th",{class:"border-e-sm text-button font-weight-bold"},"노출여부",-1)),Me={class:"px-4 py-2"},Oe=w(()=>s("th",{class:"text-button font-weight-bold"},"검색어",-1)),je={class:"px-4 py-2"},Ye={class:"d-flex justify-sm-end ga-2"},qe={class:"font-weight-bold"},ze={class:"d-flex justify-space-between align-center mt-2 mb-3 px-6"},Ge={class:"d-flex justify-sm-end ga-2"};function Je(f,n,b,e,B,V){return K(),ie(ce,null,[a(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),a(R,null,{default:o(()=>[a(_,{cols:"12"},{default:o(()=>[a(Q,{rounded:"lg",class:"mt-4"},{default:o(()=>[s("table",Te,[Pe,s("tbody",null,[s("tr",Re,[Ae,s("td",Ue,[a(R,{dense:""},{default:o(()=>[a(_,{cols:"6"},{default:o(()=>[a(X,{items:e.parentCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:e.parentCategoryId,"onUpdate:modelValue":[n[0]||(n[0]=t=>e.parentCategoryId=t),e.onParentCategoryChange],"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1})]),_:1})]),Le,s("td",Ne,[a(e.DateFilter,{"is-have-period-type":!0,"period-type":e.periodType,"onUpdate:periodType":n[1]||(n[1]=t=>e.periodType=t),"pub-end-date":e.pubEndDate,"onUpdate:pubEndDate":n[2]||(n[2]=t=>e.pubEndDate=t),"pub-start-date":e.pubStartDate,"onUpdate:pubStartDate":n[3]||(n[3]=t=>e.pubStartDate=t)},null,8,["period-type","pub-end-date","pub-start-date"])])]),s("tr",null,[He,s("td",Me,[a(me,{inline:"",modelValue:e.selectedDisplayFlag,"onUpdate:modelValue":n[4]||(n[4]=t=>e.selectedDisplayFlag=t),"hide-details":"auto"},{default:o(()=>[a(A,{label:"전체",value:"",class:"mr-4"}),a(A,{label:"노출",value:"Y",class:"mr-4"}),a(A,{label:"미노출",value:"N"})]),_:1},8,["modelValue"])]),Oe,s("td",je,[a(R,{dense:""},{default:o(()=>[a(_,{cols:"4",md:"3"},{default:o(()=>[a(X,{items:e.querySelectionItems,"item-title":"text","item-value":"value",modelValue:e.keywordType,"onUpdate:modelValue":n[5]||(n[5]=t=>e.keywordType=t),"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1}),a(_,{cols:"8",md:"6"},{default:o(()=>[a(pe,{variant:"outlined",color:"primary","hide-details":"true",modelValue:e.keyword,"onUpdate:modelValue":n[6]||(n[6]=t=>e.keyword=t),placeholder:"검색어를 입력하세요."},null,8,["modelValue"])]),_:1})]),_:1})])])])])]),_:1}),s("div",Ye,[a(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"secondary",onClick:e.searchEvent,variant:"outlined"},{default:o(()=>[i("검색")]),_:1})])]),_:1}),a(_,{cols:"12"},{default:o(()=>[s("p",qe,"총 "+C(e.totalCnt)+"개",1),a(Q,{rounded:"lg",class:"card mt-4"},{default:o(()=>[a(ve,{loading:e.loading,headers:e.tableHeader,itemsLength:10,items:e.eventBoardDocs,"item-value":"headDocId","show-select":"",modelValue:e.selectedRows,"onUpdate:modelValue":n[8]||(n[8]=t=>e.selectedRows=t),"onClick:row":e.openDetail},{"no-data":o(()=>[a(e.TableEmptyState)]),"item.title":o(({item:t})=>[i(C(t.title)+" ",1),t.pinFlag==="Y"?(K(),Ce(fe,{key:0,class:"chip"},{default:o(()=>[i("상단고정")]),_:1})):be("",!0)]),"item.displayFlag":o(({value:t})=>[i(C(t==="Y"?"노출":"미노출"),1)]),"item.postPeriod":o(({item:t})=>[i(C(e.formatDatePeriod(t.pubStartDate))+" ~ "+C(t.pubEndDate===null?"상시":e.formatDatePeriod(t.pubEndDate)),1)]),"item.createDate":o(({item:t})=>[i(C(e.formatCreatedDate(t.createDate)),1)]),bottom:o(()=>[a(ye),s("div",ze,[s("div",Ge,[a(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"grey100",onClick:e.selectUnexposedItem},{default:o(()=>[i("선택 미노출")]),_:1}),a(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"error",disabled:!e.selectedRows.length,onClick:e.deleteEvents},{default:o(()=>[i("삭제")]),_:1},8,["disabled"])]),a(e.Pagination,{class:"d-flex align-center ml-4 elevation-0",modelValue:e.currentPage,"onUpdate:modelValue":n[7]||(n[7]=t=>e.currentPage=t),length:e.totalPages,"total-visible":7},null,8,["modelValue","length"]),a(x,{type:"submit",class:"submit-btn mt-2",flat:"",color:"grey200",onClick:e.registerEvent},{default:o(()=>[i("이벤트 등록")]),_:1})])]),_:2},1032,["loading","items","modelValue"])]),_:1})]),_:1})]),_:1})],64)}const rt=ue(Fe,[["render",Je],["__scopeId","data-v-08d8d7e7"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR2000.vue"]]);export{rt as default};
