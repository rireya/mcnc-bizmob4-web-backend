import{d as z,ap as T,j as M,aq as p,p as G,_ as H,Q as J,o as C,c as y,w as n,a,af as Y,f as e,ak as Q,al as k,H as B,I as f,M as W,g as N,h as v,U as _,e as X,a4 as F,J as K,O as Z,P as $}from"./index-C5K_s1wl.js";import{P as ee}from"./PeriodDate-Y1bD6Y6f.js";import{a as te,v as oe}from"./utils-CFlAkpuO.js";import{a as ae}from"./useNetwork-BBZmMd-V.js";import{L as le}from"./LandingSelect-DityfkCS.js";import{b as g}from"./common-AUcBvRqL.js";import{u as se}from"./useBannerMgmt-Citl6Y3L.js";import{u as ie}from"./useCommonCode-DIzdSdac.js";const ne=15,de=z({__name:"BannerForm",props:T({type:{type:String,required:!0}},{postingPeriod:{type:Object,required:!0},postingPeriodModifiers:{},exposed:{type:String,required:!0},exposedModifiers:{},order:{type:Number,required:!0},orderModifiers:{},landing:{type:Object,required:!0},landingModifiers:{},file:{type:Object,required:!0},fileModifiers:{}}),emits:["update:postingPeriod","update:exposed","update:order","update:landing","update:file"],setup(d,{expose:s}){const h=d,{alert:t}=ae(),{validateForm:b}=se(),{getLandingOptions:x}=ie(),D=()=>{switch(h.type){case g.HOME_ROLL:return 12;case g.BENEFIT:return 12;case g.HOME_FIXED:return 3;case g.HOME_POPUP:return 5}},l=M([]),P=p(d,"postingPeriod"),U=p(d,"exposed"),m=p(d,"order"),w=p(d,"landing"),o=p(d,"file"),i=M(),I=()=>{i.value&&i.value.click&&o&&i.value.click()},j=async()=>{var S;if(!i.value||!i.value.files||!((S=i.value.files)!=null&&S.length))return;const c=[];for(let u=0;u<i.value.files.length;u++)i.value.files.item(u)&&c.push(oe(i.value.files.item(u),{types:["image/jpeg","image/jpg","image/png"]}));if((await Promise.all(c)).find(u=>!u.valid)){t("다음 형식 중 하나로 이미지를 업로드하세요: JPG, JPEG, PNG."),i.value.value="";return}i.value.files.item(0)&&(o.value.file&&!(o.value.file instanceof File)&&(o.value.deleteFile=o.value.file),o.value.file=i.value.files.item(0),o.value.file instanceof File&&await new Promise(u=>{const L=new FileReader;L.onload=R=>{o.value.imageUrl=R.target.result,u(!0)},L.readAsDataURL(o.value.file)})),i.value.value=""},A=()=>{o.value.file instanceof File||(o.value.deleteFile=o.value.file),o.value.imageUrl=void 0,o.value.file=void 0},q=()=>{const c=parseInt(""+m.value,10);isNaN(c)?m.value=1:m.value=c},V=()=>b(P.value,w.value,o.value,l.value),E=async()=>{l.value=await x()};G(()=>{E()}),s({isFormValid:V});const O={props:h,alert:t,validateForm:b,getLandingOptions:x,getMaxOrder:D,maxOrder:ne,landingLocationOpts:l,postingPeriod:P,exposed:U,order:m,landingLocation:w,file:o,inputFile:i,selectFile:I,onInputFile:j,onDeleteFile:A,onOrderChange:q,isFormValid:V,getlandingLocationOpts:E,PeriodDate:ee,get toFileSize(){return te},get LandingSelect(){return le}};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),r=d=>(Z("data-v-c7128030"),d=d(),$(),d),re={class:"form-table"},ue=r(()=>e("colgroup",null,[e("col",{style:{width:"124px"}}),e("col"),e("col",{style:{width:"124px"}}),e("col",{style:{width:"20%"}})],-1)),ce={class:"border-b-sm"},pe=r(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"게시기간",-1)),fe={class:"px-4 py-2"},me=r(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"노출여부",-1)),Ce={class:"px-4 py-2"},_e={class:"text-button font-weight-bold"},ge=r(()=>e("th",{class:"border-e-sm",rowspan:"2"},[e("p",null,[v("배너"),e("br"),v("이미지 파일")])],-1)),ve={class:"px-4 py-2"},he={class:"d-flex align-end ga-2"},be=r(()=>e("input",{type:"text",hidden:""},null,-1)),xe=r(()=>e("p",{class:"text-subtitle-2"},"1개 등록 000x000px",-1)),De=r(()=>e("p",{class:"text-primary text-subtitle-2"},"혜택배너 사이즈에 맞게 등록해주세요.",-1)),ye=r(()=>e("th",{class:"border-e-sm text-button font-weight-bold border-b-sm"},"노출순서",-1)),Be={class:"px-4 py-2 border-b-sm"},Fe={class:"d-flex align-center gap-2 font-weight-regular"},Pe={class:"w-33"},we={class:"border-b-sm"},Ve={class:"px-4 py-2",colspan:"3"},Ee={class:"text-subtitle-1 font-weight-bold"},Oe={class:"text-primary"},Se={class:"d-flex align-center justify-space-between border-dashed border-0 border-b-thin"},Le={class:"d-flex ga-2 text-body-2"},Me={key:0,class:"text-disabled"},ke={class:"position-relative",style:{height:"200px"}},Ne=["src"],Ue={class:""},Ie=r(()=>e("th",{class:"border-e-sm text-button font-weight-bold"},"랜딩 위치",-1)),je={class:"px-4 py-2",colspan:"3"};function Ae(d,s,h,t,b,x){const D=J("v-number-input");return C(),y(K,{rounded:"lg",class:"overflow-hidden mt-4"},{default:n(()=>[a(Y,{class:"pa-0"},{default:n(()=>[e("table",re,[ue,e("tbody",null,[e("tr",ce,[pe,e("td",fe,[a(t.PeriodDate,{pubEndDate:t.postingPeriod.endDate,"onUpdate:pubEndDate":s[0]||(s[0]=l=>t.postingPeriod.endDate=l),pubStartDate:t.postingPeriod.startDate,"onUpdate:pubStartDate":s[1]||(s[1]=l=>t.postingPeriod.startDate=l),selectedPeriod:t.postingPeriod.noEndDate,"onUpdate:selectedPeriod":s[2]||(s[2]=l=>t.postingPeriod.noEndDate=l)},null,8,["pubEndDate","pubStartDate","selectedPeriod"])]),me,e("td",Ce,[a(Q,{inline:"","hide-details":"auto",modelValue:t.exposed,"onUpdate:modelValue":s[3]||(s[3]=l=>t.exposed=l)},{default:n(()=>[a(k,{label:"노출",value:"Y",class:"mr-4"}),a(k,{label:"미노출",value:"N"})]),_:1},8,["modelValue"])])]),e("tr",_e,[ge,e("td",ve,[a(B,{dense:""},{default:n(()=>[a(f,{cols:"12"},{default:n(()=>[e("div",he,[a(W,{readonly:"",variant:"outlined",color:"primary","hide-details":"true",placeholder:"파일을 선택하세요.",onClick:t.selectFile,density:"compact"}),be,e("input",{accept:".png, .jpg, .jpeg",type:"file",hidden:"",ref:"inputFile",onChange:t.onInputFile},null,544),a(N,{flat:"",color:"grey100",onClick:t.selectFile},{default:n(()=>[v("파일선택")]),_:1}),xe,De])]),_:1})]),_:1})]),ye,e("td",Be,[e("div",Fe,[e("div",Pe,[a(D,{modelValue:t.order,"onUpdate:modelValue":s[4]||(s[4]=l=>t.order=l),variant:"outlined","hide-details":"true",reverse:!1,controlVariant:"default",label:"",hideInput:!1,inset:!1,max:t.maxOrder,min:1,step:1,class:"no-buttons",density:"compact",onChange:t.onOrderChange},null,8,["modelValue"])]),e("span",null,"/ "+_(t.maxOrder))])])]),e("tr",we,[e("td",Ve,[a(B,{dense:""},{default:n(()=>[a(f,{cols:"12"},{default:n(()=>[e("p",Ee,[v("이미지 파일 첨부 "),e("span",Oe,_(t.file.file?1:0)+"개",1)])]),_:1}),t.file?(C(),y(f,{key:0,cols:"12"},{default:n(()=>[a(B,{dense:""},{default:n(()=>[t.file.file?(C(),y(f,{key:0,cols:"12",md:"8",class:"pl-0 px-3"},{default:n(()=>[e("div",Se,[e("div",Le,[e("p",null,_(t.file.file.name),1),t.file.file.size>=1?(C(),X("p",Me,_(t.toFileSize(t.file.file.size)),1)):F("",!0)]),a(N,{flat:"",onClick:t.onDeleteFile,icon:"mdi-close",size:"small"})])]),_:1})):F("",!0)]),_:1})]),_:1})):F("",!0),a(f,{md:"12"},{default:n(()=>[e("div",ke,[e("img",{class:"h-100",src:t.file.imageUrl,alt:""},null,8,Ne)])]),_:1})]),_:1})])]),e("tr",Ue,[Ie,e("td",je,[a(t.LandingSelect,{modelValue:t.landingLocation,"onUpdate:modelValue":s[5]||(s[5]=l=>t.landingLocation=l),options:t.landingLocationOpts},null,8,["modelValue","options"])])])])])]),_:1})]),_:1})}const We=H(de,[["render",Ae],["__scopeId","data-v-c7128030"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/components/BannerForm/BannerForm.vue"]]);export{We as B};
