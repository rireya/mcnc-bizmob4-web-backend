import{d as A,p as I,E as M,j as u,_ as k,o as _,e as h,a as r,w as n,H as O,a2 as H,I as F,f as v,U as D,g as y,h as S,J as Y,af as T,aA as U,a4 as X}from"./index-C5K_s1wl.js";import{B as j}from"./BaseBreadcrumb-DEdlJy1-.js";import{S as P,a as R}from"./StatusSwitch-32i-X-JE.js";import{u as q}from"./useBannerMgmt-Citl6Y3L.js";import{a as L}from"./useNetwork-BBZmMd-V.js";import{b as c}from"./common-AUcBvRqL.js";import{f as z}from"./utils-CFlAkpuO.js";import"./TableEmptyState-DTIE6Crm.js";const J=A({__name:"ABAN1300",setup(C,{expose:s}){s(),I(()=>{d()});const{reqBannerList:f,reorderBanner:e,updateDisplayFlag:m,deleteBanner:g}=q(),{alert:a}=L(),o=M(),w=u({title:"홈 고정배너 관리"}),V=u([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"배너 관리",disabled:!1,href:"/admin/banner"},{text:"홈 고정배너 관리",disabled:!0,href:"#"}]),b=u(0),E=[{title:"롤링순서",value:"rollingSortOrder"},{title:"배너 썸네일",value:"attachFile"},{title:"삭제",value:"delete"},{title:"랜딩위치",value:"landingType"},{title:"노출여부",value:"displayFlag"},{title:"등록일",value:"createDate"}],i=u([]),B=u(!1),d=async()=>{B.value=!0;const{status:t,data:l}=await f(c.HOME_FIXED);B.value=!1,t&&(i.value=l.bannerDocs.sort((p,N)=>Number(N.rollingSortOrder)-Number(p.rollingSortOrder)),b.value=l.totalCnt)},x={reqBannerList:f,reorderBanner:e,updateDisplayFlag:m,deleteBanner:g,alert:a,router:o,page:w,breadcrumbs:V,totalCnt:b,tableHeaders:E,fixedBanners:i,loading:B,reqFixedBannerList:d,deleteFixedBanner:async t=>{const l=await g(c.HOME_FIXED,t);l&&l.status&&d()},updateStatus:async t=>{const{status:l}=await m(c.HOME_FIXED,t.docId,t.displayFlag);if(!l){t.displayFlag=t.displayFlag==="Y"?"N":"Y";return}d()},reorderFixedBanner:async()=>{const{status:t}=await e(c.HOME_FIXED,i.value.map((l,p)=>({docId:l.docId,rollingSortOrder:(i.value.length-p).toString()})));t&&d()},registerFixedBanner:async()=>{if(i.value.length>=15){a("홈 고정 배너는 15개까지 등록가능합니다.",void 0,"등록 개수가 초과되었습니다.");return}o.push("/fixed-banners/register")},fixedBannerDetails:async t=>{o.push("/fixed-banners/"+t.docId)},BaseBreadcrumb:j,get SortableTable(){return P},get StatusSwitch(){return R},get formatDate(){return z}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),W={class:"d-flex justify-space-between align-center"},G={class:"text-subtitle-1 font-weight-bold"},K=["src"];function Q(C,s,f,e,m,g){return _(),h(H,null,[r(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),r(O,{class:"mt-4"},{default:n(()=>[r(F,{cols:"12"},{default:n(()=>[v("div",W,[v("p",G,"총 "+D(e.fixedBanners.length)+"개",1),r(y,{flat:"",color:"grey200",onClick:e.registerFixedBanner},{default:n(()=>[S("등록하기")]),_:1})])]),_:1}),r(F,{cols:"12"},{default:n(()=>[r(Y,{rounded:"lg",class:"overflow-hidden"},{default:n(()=>[r(T,{class:"pa-0"},{default:n(()=>[r(e.SortableTable,{headers:e.tableHeaders,modelValue:e.fixedBanners,"onUpdate:modelValue":s[0]||(s[0]=a=>e.fixedBanners=a),"item-key":"docId",loading:e.loading,onChange:s[1]||(s[1]=a=>e.reorderFixedBanner()),"onClick:row":s[2]||(s[2]=a=>e.fixedBannerDetails(a))},{"item-delete":n(a=>[r(y,{flat:"",icon:"mdi-trash-can-outline",size:"small",onClick:U(o=>e.deleteFixedBanner(a.data.docId),["stop"]),variant:"text"},null,8,["onClick"])]),"item-attachFile":n(({data:a})=>[a.attachFile?(_(),h("img",{key:0,src:a.attachFile.filePath,alt:"",srcset:"",width:"200"},null,8,K)):X("",!0)]),"item-createDate":n(({data:a})=>[S(D(e.formatDate(a.createDate,"YYYY[.]MM[.]DD")),1)]),"item-displayFlag":n(({index:a})=>[r(e.StatusSwitch,{modelValue:e.fixedBanners[a].displayFlag,"onUpdate:modelValue":o=>e.fixedBanners[a].displayFlag=o,"true-value":"Y","false-value":"N",onChange:o=>e.updateStatus(e.fixedBanners[a])},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["modelValue","loading"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ce=k(J,[["render",Q],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABAN/ABAN1300.vue"]]);export{ce as default};
