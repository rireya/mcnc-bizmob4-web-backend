import{d as S,j as l,s as R,p as G,_ as H,Q as j,o as q,e as z,a as s,w as o,H as E,a2 as F,I as N,J as v,af as w,am as U,f as g,U as y,ad as J,T as O,h as M,g as Q}from"./index-C5K_s1wl.js";import{B as W}from"./BaseBreadcrumb-DEdlJy1-.js";import{T as K}from"./TreeView-jP6dCXnk.js";import{P as X}from"./Pagination-CMt1YS54.js";import{u as Y}from"./useNetwork-BBZmMd-V.js";const Z=S({__name:"AMAN2000",setup(L,{expose:d}){d();const C=l({title:"권한 관리"}),e=l([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"관리자 기능",disabled:!1,href:"/admin/permission"},{text:"권한 관리",disabled:!0,href:"#"}]),c=Y(),_=l(!1),b=[{title:"No",value:"no",align:"center",width:"20%"},{title:"권한그룹ID",value:"groupId",align:"center",width:"30%"},{title:"권한그룹명",value:"groupName",align:"center"}],t=l(1),p=l(0),f=l([]);R(t,()=>{h()});const h=async()=>{_.value=!0;const{status:r,data:a}=await c.post({url:"/group/list",isLoading:!1,body:{pageNo:t.value,pageSize:10}});_.value=!1,r&&(p.value=Math.ceil(a.totalCount/10),f.value=a.groupList.map((i,n)=>{const P=a.totalCount-(t.value-1)*10;return{...i,no:P-n}}))},u=l(),k=async(r,{item:a})=>{if(u.value===a.groupId)return;const i=u.value;if(u.value=a.groupId,!m.value)return;await A(a.groupId)||(u.value=i)},m=l(),D=l(),I=l([]),x=r=>{const a=i=>i.map(n=>({id:n.menuId,label:n.menuName,children:n.subMenuList?a(n.subMenuList):void 0,parentMenuId:n.parentMenuId}));I.value=a(r.menuList)},B=async()=>{const{status:r,data:a}=await c.post({url:"/menu/list"});r&&x(a)},A=async r=>{const{status:a,data:i}=await c.post({url:"/group/menu/mapping/list",body:{groupId:r}});return a?(m.value&&m.value.checkItems(i.menuIds,!0,!0),!0):!1},T=async()=>{if(!m.value||!u.value)return;const r=m.value.getSelectedItems(),{status:a}=await c.post({url:"/group/menu/mapping/register",body:{groupId:u.value,menuIds:r}})};G(()=>{h(),B()});const V={page:C,breadcrumbs:e,network:c,loading:_,tableHeader:b,currentPage:t,totalPages:p,permissionGroupList:f,reqGroupList:h,activeRow:u,onClickRow:k,treeRef:m,selectedTree:D,treeList:I,mappingList:x,reqMenuList:B,reqMenuByGroupId:A,updateMenu:T,BaseBreadcrumb:W,TreeView:K,Pagination:X};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),$=g("p",{class:"text-h6 font-weight-bold mb-4"},"권한 목록",-1),ee={class:"mt-4"},te=g("p",{class:"text-h6 font-weight-bold mb-4"},"접근가능메뉴 목록",-1),ae={class:"d-flex justify-end mt-2"};function se(L,d,C,e,c,_){const b=j("perfect-scrollbar");return q(),z(F,null,[s(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),s(E,{class:"mt-4"},{default:o(()=>[s(N,{cols:"7"},{default:o(()=>[$,s(v,{rounded:"lg",class:"overflow-hidden"},{default:o(()=>[s(w,{class:"pa-0"},{default:o(()=>[s(U,{class:"permission-group","hide-default-footer":"",loading:e.loading,headers:e.tableHeader,itemsLength:10,items:e.permissionGroupList,"item-value":"groupId","onClick:row":e.onClickRow},{"item.groupName":o(({item:t})=>[g("div",{class:J(["text-start",{active:t.groupId===e.activeRow}])},y(t.groupName),3)]),_:1},8,["loading","items"])]),_:1})]),_:1}),g("div",ee,[s(e.Pagination,{length:e.totalPages,"total-visible":7,modelValue:e.currentPage,"onUpdate:modelValue":d[0]||(d[0]=t=>e.currentPage=t)},null,8,["length","modelValue"])])]),_:1}),s(N,{cols:"5",class:""},{default:o(()=>[te,s(v,{rounded:"lg",class:"overflow-hidden flex-grow-1"},{default:o(()=>[s(w,{class:"pa-3 d-flex"},{default:o(()=>[s(v,null,{default:o(()=>[s(w,{class:"pa-2"},{default:o(()=>[s(b,{style:{height:"670px"},class:"w-100"},{default:o(()=>[s(e.TreeView,{listItem:e.treeList,"use-select":"",ref:"treeRef",selected:e.selectedTree,onClick:d[1]||(d[1]=t=>e.selectedTree=t.id)},{"pre-icon":o(t=>[s(O,{class:"cursor-pointer"},{default:o(()=>{var p,f;return[M(y(t.children&&t.children.length||(p=t==null?void 0:t.customData)!=null&&p.root?(f=t.state)!=null&&f.expanded?"mdi-folder-open-outline ":"mdi-folder-outline":"mdi-file"),1)]}),_:2},1024)]),_:1},8,["listItem","selected"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),g("div",ae,[s(Q,{flat:"",color:"grey200",onClick:e.updateMenu},{default:o(()=>[M("수정")]),_:1})])]),_:1})]),_:1})],64)}const ie=H(Z,[["render",se],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/AMAN/AMAN2000.vue"]]);export{ie as default};
