import{d as H,E as M,a8 as z,j as o,k as J,_ as W,o as Y,e as G,a as n,w as u,H as K,a2 as L,I as P,g as w,h as k}from"./index-C5K_s1wl.js";import{B as Q}from"./BaseBreadcrumb-DEdlJy1-.js";import{a as X,u as Z}from"./useNetwork-BBZmMd-V.js";import{N as _}from"./NoticeForm-D_K1kkMc.js";import{f as h}from"./utils-CFlAkpuO.js";import"./PeriodDate-Y1bD6Y6f.js";import"./format-CimBkJP1.js";import"./common-AUcBvRqL.js";import"./useCommonCode-DIzdSdac.js";const $=H({__name:"ABOR1200",setup(S,{expose:t}){t();const f=M(),e=z(),{alert:s,confirm:g}=X(),a=Z(),O=o({title:"공지사항 등록"}),R=o([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/notices"},{text:"공지사항",disabled:!1,href:"/admin/notices"},{text:"공지사항 등록",disabled:!0,href:"#"}]),j=o(null),b=o(null),m=o(!1),y=o(""),c=o(""),q=o(""),E=o("N"),D=o(""),F=o(""),N=o("Y"),x=o("N"),A=o(!1),i=J({files:[],deleteFiles:[]});function C(d){if(!d)return null;const l=new Date(d);return h(l,"yyyy-MM-DDTHH:mm:ss")}const U={router:f,route:e,alert:s,confirm:g,network:a,page:O,breadcrumbs:R,parentCategoryId:j,subCategoryId:b,loading:m,title:y,contents:c,docId:q,pinFlag:E,pubStartDate:D,pubEndDate:F,displayFlag:N,pubAlwaysFlag:x,selectedPeriod:A,imageFiles:i,formatToISO:C,registerNotice:async()=>{if(!b.value)return s("카테고리를 선택해주세요."),!1;if(!y.value)return s("제목을 입력해주세요."),!1;if(!D.value||!F.value&&!A.value)return s("시작일과 마감일을 선택해주세요."),!1;if(i.files.length<=0&&!c.value)return s("이미지 파일 등록 혹은 답변 내용을 입력해주세요"),!1;const{role:d}=await g("정말로 이 공지를 등록하시겠습니까?","등록","취소");if(d!="confirm")return;m.value=!0;const l=new FormData,I={title:y.value,contents:c.value,subCategoryId:b.value,displayFlag:N.value,pinFlag:E.value,pubAlwaysFlag:x.value,pubStartDate:C(D.value),pubEndDate:C(F.value),imageFiles:i.files.map((r,p)=>({attachId:"",fileName:r.name,filePath:"",orderNo:p+1,fileSize:r.size}))},v=new Blob([JSON.stringify(I)],{type:"application/json"});l.append("request",v,"request.json"),i.files&&Array.isArray(i.files)&&i.files.forEach((r,p)=>{r instanceof File?l.append("imageFiles",r,r.name):console.warn(`Skipping invalid file at index ${p}:`,r)});const{status:B}=await a.post({url:"/board/notice/register",body:l});m.value=!1,B&&f.push("/notices")},goBack:()=>{const{parentCategoryId:d,subCategoryId:l,periodType:I,pubStartDate:v,pubEndDate:B,displayFlag:r,keywordType:p,keyword:T,currentPage:V}=e.query;f.push({path:"/notices",query:{parentCategoryId:d,subCategoryId:l,periodType:I,pubStartDate:v,pubEndDate:B,displayFlag:r,keywordType:p,keyword:T,currentPage:V}})},BaseBreadcrumb:Q,NoticeForm:_};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}});function ee(S,t,f,e,s,g){return Y(),G(L,null,[n(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),n(K,null,{default:u(()=>[n(P,{cols:"12"},{default:u(()=>[n(e.NoticeForm,{selectedPeriod:e.selectedPeriod,"onUpdate:selectedPeriod":t[0]||(t[0]=a=>e.selectedPeriod=a),isForDetails:!1,pinFlag:e.pinFlag,"onUpdate:pinFlag":t[1]||(t[1]=a=>e.pinFlag=a),pubStartDate:e.pubStartDate,"onUpdate:pubStartDate":t[2]||(t[2]=a=>e.pubStartDate=a),pubEndDate:e.pubEndDate,"onUpdate:pubEndDate":t[3]||(t[3]=a=>e.pubEndDate=a),parentCategoryId:e.parentCategoryId,"onUpdate:parentCategoryId":t[4]||(t[4]=a=>e.parentCategoryId=a),subCategoryId:e.subCategoryId,"onUpdate:subCategoryId":t[5]||(t[5]=a=>e.subCategoryId=a),title:e.title,"onUpdate:title":t[6]||(t[6]=a=>e.title=a),content:e.contents,"onUpdate:content":t[7]||(t[7]=a=>e.contents=a),displayFlag:e.displayFlag,"onUpdate:displayFlag":t[8]||(t[8]=a=>e.displayFlag=a),file:e.imageFiles,"onUpdate:file":t[9]||(t[9]=a=>e.imageFiles=a),postId:e.docId},null,8,["selectedPeriod","pinFlag","pubStartDate","pubEndDate","parentCategoryId","subCategoryId","title","content","displayFlag","file","postId"])]),_:1}),n(P,{cols:"12",class:"d-flex justify-space-between"},{default:u(()=>[n(w,{flat:"",color:"grey100",onClick:t[10]||(t[10]=a=>S.$router.back())},{default:u(()=>[k("취소")]),_:1}),n(w,{flat:"",color:"grey100",onClick:t[11]||(t[11]=a=>e.goBack())},{default:u(()=>[k("목록 이동")]),_:1}),n(w,{flat:"",color:"grey200",onClick:t[12]||(t[12]=a=>e.registerNotice())},{default:u(()=>[k("등록")]),_:1})]),_:1})]),_:1})],64)}const fe=W($,[["render",ee],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR1200.vue"]]);export{fe as default};
