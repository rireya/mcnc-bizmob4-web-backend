import{d as J,a8 as W,E as G,p as K,j as l,k as Q,_ as X,o as Y,e as Z,a as i,w as p,H as $,a2 as ee,I as T,g as R,h as q}from"./index-C5K_s1wl.js";import{B as te}from"./BaseBreadcrumb-DEdlJy1-.js";import{N as ae}from"./NoticeForm-D_K1kkMc.js";import{u as oe,a as le}from"./useNetwork-BBZmMd-V.js";import{f as ne}from"./utils-CFlAkpuO.js";import"./PeriodDate-Y1bD6Y6f.js";import"./format-CimBkJP1.js";import"./common-AUcBvRqL.js";import"./useCommonCode-DIzdSdac.js";const re=J({__name:"ABOR1100",setup(V,{expose:a}){a();const c=oe(),e=W(),f=G(),{confirm:b,alert:t}=le();K(()=>{var o;const n=e.query;n&&(m.value=((o=n.parentCategoryId)==null?void 0:o.toString())??null)});const g=l(!1),H=l({title:"공지사항 상세"}),M=l([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/notices"},{text:"공지사항",disabled:!1,href:"/admin/notices"},{text:"공지사항 상세",disabled:!0,href:"#"}]),y=l(),m=l(null),I=l(null),B=l(""),v=l(""),F=l(""),S=l(null),E=l(""),k=l(""),C=l(null),D=l(null),O=l(!1),d=Q({files:[],deleteFiles:[]}),L=async()=>{var u;const{status:n,data:o}=await c.post({url:"/board/notice/detail",body:{noticeDocId:String(e.params.docId)}});n&&(B.value=o.docId,v.value=o.title,F.value=o.contents,m.value=o.parentCategoryId??null,I.value=o.subCategoryId??null,S.value=o.displayFlag??null,E.value=o.pinFlag,k.value=o.pubAlwaysFlag,C.value=o.pubStartDate??null,D.value=o.pubEndDate??null,d.files=o.imageFiles.map(r=>({attachId:r.attachId,fileName:`${r.fileName}`,filePath:r.filePath,orderNo:r.orderNo,fileSize:r.fileSize})),(u=y.value)==null||u.initCategory())},_=async()=>{const{role:n}=await b("삭제하시겠습니까?","삭제","취소");if(n!="confirm")return;g.value=!0;const{status:o}=await c.post({url:"/board/notice/delete",isLoading:!0,body:{noticeDocId:String(e.params.docId)}});g.value=!1,o&&f.push("/notices")};function x(n){if(!n)return null;const o=new Date(n);return ne(o,"yyyy-MM-DDTHH:mm:ss")}const j={network:c,route:e,router:f,confirm:b,alert:t,loading:g,page:H,breadcrumbs:M,noticeFormRef:y,parentCategoryId:m,subCategoryId:I,docId:B,title:v,contents:F,displayFlag:S,pinFlag:E,pubAlwaysFlag:k,pubStartDate:C,pubEndDate:D,selectedPeriod:O,imageFiles:d,fetchNoticeDetails:L,deleteNotice:_,formatToISO:x,saveNotice:async(n=!1)=>{var N,h;const{role:o}=await b("정말로 이 항목을 저장하시겠습니까?","저장","취소");if(o!="confirm")return;if(!I.value)return t("카테고리를 선택해주세요."),!1;if(!v.value)return t("제목을 입력해주세요."),!1;if(!C.value||!D.value&&!O.value)return t("시작일과 마감일을 선택해주세요."),!1;if(d.files.length<=0&&!F.value)return t("이미지 파일 등록 혹은 답변 내용을 입력해주세요"),!1;const u={parent:(N=y.value)!=null&&N.isCategoryNotExist().category?null:m.value,sub:(h=y.value)!=null&&h.isCategoryNotExist().subCategory?null:I.value};g.value=!0;const r=new FormData,A={noticeDocId:B.value,title:v.value,contents:F.value,deleteImageFileIds:d.deleteFiles.map(s=>s.attachId),subCategoryId:u.sub,displayFlag:S.value,pinFlag:E.value,pubAlwaysFlag:k.value,pubStartDate:x(C.value),pubEndDate:x(D.value),imageFiles:d.files.map((s,z)=>({attachId:s.attachId||"",fileName:s.fileName||s.name,filePath:s.filePath||"",orderNo:z+1}))},P=new Blob([JSON.stringify(A)],{type:"application/json"});r.append("request",P,"request.json");const w=d.files.filter(s=>s instanceof File);w.length>0&&w.forEach(s=>{r.append("newImageFiles",s,s.name)});const{status:U}=await c.post({url:"/board/notice/update",isLoading:!0,body:r});g.value=!1,U&&f.push("/notices")},goBack:()=>{const{parentCategoryId:n,subCategoryId:o,periodType:u,pubStartDate:r,pubEndDate:A,displayFlag:P,keywordType:w,keyword:U,currentPage:N}=e.query;f.push({path:"/notices",query:{parentCategoryId:n,subCategoryId:o,periodType:u,pubStartDate:r,pubEndDate:A,displayFlag:P,keywordType:w,keyword:U,currentPage:N}})},BaseBreadcrumb:te,NoticeForm:ae};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}});function se(V,a,c,e,f,b){return Y(),Z(ee,null,[i(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),i($,null,{default:p(()=>[i(T,{cols:"12"},{default:p(()=>[i(e.NoticeForm,{selectedPeriod:e.selectedPeriod,"onUpdate:selectedPeriod":a[0]||(a[0]=t=>e.selectedPeriod=t),isForDetails:!0,pinFlag:e.pinFlag,"onUpdate:pinFlag":a[1]||(a[1]=t=>e.pinFlag=t),pubStartDate:e.pubStartDate,"onUpdate:pubStartDate":a[2]||(a[2]=t=>e.pubStartDate=t),pubEndDate:e.pubEndDate,"onUpdate:pubEndDate":a[3]||(a[3]=t=>e.pubEndDate=t),parentCategoryId:e.parentCategoryId,"onUpdate:parentCategoryId":a[4]||(a[4]=t=>e.parentCategoryId=t),subCategoryId:e.subCategoryId,"onUpdate:subCategoryId":a[5]||(a[5]=t=>e.subCategoryId=t),title:e.title,"onUpdate:title":a[6]||(a[6]=t=>e.title=t),content:e.contents,"onUpdate:content":a[7]||(a[7]=t=>e.contents=t),displayFlag:e.displayFlag,"onUpdate:displayFlag":a[8]||(a[8]=t=>e.displayFlag=t),file:e.imageFiles,"onUpdate:file":a[9]||(a[9]=t=>e.imageFiles=t),postId:e.docId,onAfterInit:e.fetchNoticeDetails,ref:"noticeFormRef"},null,8,["selectedPeriod","pinFlag","pubStartDate","pubEndDate","parentCategoryId","subCategoryId","title","content","displayFlag","file","postId"])]),_:1}),i(T,{cols:"12",class:"d-flex justify-space-between"},{default:p(()=>[i(R,{flat:"",color:"error",onClick:e.deleteNotice},{default:p(()=>[q("삭제")]),_:1}),i(R,{flat:"",color:"grey100",onClick:a[10]||(a[10]=t=>e.goBack())},{default:p(()=>[q("목록 이동")]),_:1}),i(R,{flat:"",color:"grey200",onClick:a[11]||(a[11]=t=>e.saveNotice())},{default:p(()=>[q("저장")]),_:1})]),_:1})]),_:1})],64)}const ve=X(re,[["render",se],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR1100.vue"]]);export{ve as default};
