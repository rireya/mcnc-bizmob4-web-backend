import{d as N,p as O,E as A,j as d,_ as E,o as v,e as C,a as r,w as l,H as x,a2 as L,I as S,f as y,U as c,g as w,h as _,J as k,af as H,aA as I,a4 as T}from"./index-C5K_s1wl.js";import{B as P}from"./BaseBreadcrumb-DEdlJy1-.js";import{S as U,a as j}from"./StatusSwitch-32i-X-JE.js";import{u as q}from"./useBannerMgmt-Citl6Y3L.js";import{a as z}from"./useNetwork-BBZmMd-V.js";import{b as m}from"./common-AUcBvRqL.js";import{f as J}from"./utils-CFlAkpuO.js";import"./TableEmptyState-DTIE6Crm.js";const W=N({__name:"ABAN1000",setup(R,{expose:n}){n(),O(()=>{i()});const{reqBannerList:f,reorderBanner:e,updateDisplayFlag:g,deleteBanner:B}=q(),{alert:a}=z(),s=A(),V=d({title:"홈 롤링배너 관리"}),Y=d([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"배너 관리",disabled:!1,href:"/admin/banner"},{text:"홈 롤링배너 관리",disabled:!0,href:"#"}]),D=d(0),F=[{title:"롤링순서",value:"rollingSortOrder"},{title:"배너 이미지",value:"attachFile"},{title:"삭제",value:"delete"},{title:"랜딩위치",value:"landingType"},{title:"게시기간",value:"postPeriod"},{title:"노출여부",value:"displayFlag"},{title:"등록일",value:"createDate"}],u=d([]),p=d(!1),i=async()=>{p.value=!0;const{status:t,data:o}=await f(m.HOME_ROLL);p.value=!1,t&&(u.value=o.bannerDocs.sort((b,M)=>Number(M.rollingSortOrder)-Number(b.rollingSortOrder)),D.value=o.totalCnt)},h={reqBannerList:f,reorderBanner:e,updateDisplayFlag:g,deleteBanner:B,alert:a,router:s,page:V,breadcrumbs:Y,totalCnt:D,tableHeaders:F,rollBanners:u,loading:p,reqRollBannerList:i,deleteRollBanner:async t=>{const o=await B(m.HOME_ROLL,t);o&&o.status&&i()},updateStatus:async t=>{const{status:o}=await g(m.HOME_ROLL,t.docId,t.displayFlag);if(!o){t.displayFlag=t.displayFlag==="Y"?"N":"Y";return}i()},reorderRollBanner:async()=>{const{status:t}=await e(m.HOME_ROLL,u.value.map((o,b)=>({docId:o.docId,rollingSortOrder:(u.value.length-b).toString()})));t&&i()},registerRollBanner:async()=>{s.push("/rolling-banners/register")},rollBannerDetails:async t=>{s.push("/rolling-banners/"+t.docId)},BaseBreadcrumb:P,get SortableTable(){return U},get StatusSwitch(){return j},get formatDate(){return J}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),G={class:"d-flex justify-space-between align-center"},K={class:"text-subtitle-1 font-weight-bold"},Q=["src"];function X(R,n,f,e,g,B){return v(),C(L,null,[r(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),r(x,{class:"mt-4"},{default:l(()=>[r(S,{cols:"12"},{default:l(()=>[y("div",G,[y("p",K,"총 "+c(e.totalCnt)+"개",1),r(w,{flat:"",color:"grey200",onClick:e.registerRollBanner},{default:l(()=>[_("등록하기")]),_:1})])]),_:1}),r(S,{cols:"12"},{default:l(()=>[r(k,{rounded:"lg",class:"overflow-hidden"},{default:l(()=>[r(H,{class:"pa-0"},{default:l(()=>[r(e.SortableTable,{headers:e.tableHeaders,modelValue:e.rollBanners,"onUpdate:modelValue":n[0]||(n[0]=a=>e.rollBanners=a),"item-key":"docId",loading:e.loading,onChange:n[1]||(n[1]=a=>e.reorderRollBanner()),"onClick:row":n[2]||(n[2]=a=>e.rollBannerDetails(a))},{"item-delete":l(a=>[r(w,{flat:"",icon:"mdi-trash-can-outline",size:"small",onClick:I(s=>e.deleteRollBanner(a.data.docId),["stop"]),variant:"text"},null,8,["onClick"])]),"item-attachFile":l(({data:a})=>[a.attachFile?(v(),C("img",{key:0,src:a.attachFile.filePath,alt:"",srcset:"",width:"200"},null,8,Q)):T("",!0)]),"item-postPeriod":l(({data:a})=>[_(c(e.formatDate(a.pubStartDate,"YYYY[.]MM[.]DD"))+" ~ "+c(a.pubEndDate===null?"상시":e.formatDate(a.pubEndDate,"YYYY[.]MM[.]DD")),1)]),"item-createDate":l(({data:a})=>[_(c(e.formatDate(a.createDate,"YYYY[.]MM[.]DD")),1)]),"item-displayFlag":l(({index:a})=>[r(e.StatusSwitch,{modelValue:e.rollBanners[a].displayFlag,"onUpdate:modelValue":s=>e.rollBanners[a].displayFlag=s,"true-value":"Y","false-value":"N",onChange:s=>e.updateStatus(e.rollBanners[a])},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["modelValue","loading"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ce=E(W,[["render",X],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABAN/ABAN1000.vue"]]);export{ce as default};
