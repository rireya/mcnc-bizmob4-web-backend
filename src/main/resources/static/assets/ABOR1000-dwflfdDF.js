import{d as de,E as ue,a8 as re,p as ie,j as d,l as K,s as ce,_ as me,o as Q,e as pe,a,w as l,H as A,a2 as Ce,I as y,J as X,f as n,aj as R,ak as be,al as U,M as ve,g as V,h as i,U as p,am as ye,c as fe,an as ge,a4 as De,ao as he,O as _e,P as we}from"./index-C5K_s1wl.js";import{B as Be}from"./BaseBreadcrumb-DEdlJy1-.js";import{u as xe,a as Ve}from"./useNetwork-BBZmMd-V.js";import{P as Ie}from"./Pagination-CMt1YS54.js";import{g as Se,a as Ne,D as ke}from"./DateFilter-dRZ_ZuWr.js";import{B as Fe}from"./common-AUcBvRqL.js";import{f as L}from"./utils-CFlAkpuO.js";import{u as Ee}from"./useCommonCode-DIzdSdac.js";import{T as Te}from"./TableEmptyState-DTIE6Crm.js";import"./format-CimBkJP1.js";const Pe=de({__name:"ABOR1000",setup(f,{expose:s}){s();const g=xe(),e=ue(),H=re(),{getBoardCategory:I}=Ee(),{confirm:t}=Ve();ie(()=>{J(),v(!0)});const Z=d({title:"공지사항"}),$=d([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/notices"},{text:"공지사항",disabled:!0,href:"#"}]),M=Se(),O=d(M[0].value),S=d(null),N=d(null),D=d(null),k=d(""),j=Ne(),Y=d(j[0].value),c=d(!1),C=d([]),b=d(1),B=d(0),q=d(0),x=d(10),F=d([]),ee=[{title:"No",value:"no",align:"center",width:"6%"},{title:"공지 제목",value:"title",align:"left"},{title:"유형",value:"subCategoryName",align:"center",width:"14%"},{title:"노출여부",value:"displayFlag",align:"center",width:"14%"},{title:"게시기간",value:"postPeriod",align:"center",width:"14%"},{title:"ID",value:"docId",align:"center",width:"14%"},{title:"등록일",value:"createDate",align:"center",width:"14%"}],te=o=>L(new Date(o),"yyyy.MM.DD"),ae=o=>L(new Date(o),"yyyy.MM.DD HH:mm"),h=d([]),z=K(()=>[{text:"전체",value:null},...h.value.map(o=>({text:o.codeName,value:o.codeId}))]),m=d([{text:"전체",value:null}]),G=d(z.value[0].value),_=d(m.value[0].value),J=async()=>{const o=await I(Fe.NOTICE);if(!o)return;h.value=o.categoryList,m.value=[{text:"전체",value:null}];const u=h.value[0];u.subCommonCodeList&&u.subCommonCodeList.length&&m.value.push(...u.subCommonCodeList.map(r=>({text:r.codeName,value:r.codeId})))},oe=o=>{if(!o)return;const u=h.value.find(r=>r.codeId===o);u&&(m.value=[{text:"전체",value:null}],u.subCommonCodeList&&u.subCommonCodeList.length&&m.value.push(...u.subCommonCodeList.map(r=>({text:r.codeName,value:r.codeId}))),_.value&&m.value.findIndex(r=>r.value===_.value)<0&&(_.value=null))},le=K({get:()=>D.value===null?"":D.value,set:o=>{D.value=o===""?null:o}});ce(b,()=>{v()});const v=async(o=!1)=>{const u=S.value||N.value?{periodType:O.value,periodStartDate:E(S.value)||null,periodEndDate:E(N.value,!0)||null}:null,r=k.value?{keywordType:Y.value,keyword:k.value}:null;c.value=!0;const{status:T,data:P}=await g.post({url:"/board/notice/list",isLoading:o,body:{pageNo:b.value,pageSize:x.value,subCategoryId:_.value,parentCategoryId:G.value,periodSerarch:u,keywordSearch:r,displayFlag:D.value}});return c.value=!1,T?(C.value=[],F.value=P.noticeBoardDocs,B.value=P.totalCnt,q.value=Math.ceil(B.value/x.value),F.value=P.noticeBoardDocs.map((se,ne)=>({...se,no:B.value-(b.value-1)*x.value-ne})),!0):!1};function E(o,u=!1){if(!o)return null;const r=new Date(o);return u?r.setHours(23,59,59,999):r.setHours(0,0,0,0),L(r,"yyyy-MM-DDTHH:mm:ss")}const W={network:g,router:e,route:H,getBoardCategory:I,confirm:t,page:Z,breadcrumbs:$,postSelectionPeriod:M,periodType:O,pubStartDate:S,pubEndDate:N,displayFlag:D,keyword:k,querySelectionItems:j,keywordType:Y,loading:c,selectedRows:C,currentPage:b,totalCnt:B,totalPages:q,pageSize:x,noticeBoardDocs:F,tableHeader:ee,formatCreatedDate:te,formatDatePeriod:ae,categoryList:h,parentCategoryItems:z,subCategoryItems:m,parentCategoryId:G,subCategoryId:_,getCategorySelection:J,onParentCategoryChange:oe,selectedDisplayFlag:le,reqNotice:v,formatToISO:E,searchNotice:()=>{b.value===1?v():b.value=1},openDetail:(o,{item:u})=>{e.push({path:`/notices/${u.docId}`})},registerNotice:()=>{e.push({path:"/notices/register"})},selectUnexposedItem:async()=>{const{role:o}=await t("정말로 이 항목을 모두 공개하시겠습니까?","공개","취소");if(o!="confirm")return;const u=C.value.map(T=>({noticeDocId:T,displayFlag:"N"}));c.value=!0;const{status:r}=await g.post({url:"/board/notice/set/display/list",isLoading:!0,body:{docList:u}});c.value=!1,r&&(C.value=[],await v())},deleteNotices:async()=>{const{role:o}=await t("삭제하시겠습니까?","삭제","취소");if(o!="confirm")return;c.value=!0;const{status:u}=await g.post({url:"/board/notice/delete/list",isLoading:!0,body:{noticeDocIds:C.value}});c.value=!1,u&&(C.value=[],await v())},BaseBreadcrumb:Be,Pagination:Ie,DateFilter:ke,get TableEmptyState(){return Te}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),w=f=>(_e("data-v-93e2a87c"),f=f(),we(),f),Ae={class:"form-table"},Re=w(()=>n("colgroup",null,[n("col",{style:{width:"124px"}}),n("col"),n("col",{style:{width:"124px"}}),n("col")],-1)),Ue={class:"border-b-sm"},Le=w(()=>n("th",{class:"border-e-sm text-button font-weight-bold"},"카테고리",-1)),He={class:"px-4 py-2"},Me=w(()=>n("th",{class:"border-e-sm text-button font-weight-bold"},"등록일자",-1)),Oe={class:"px-4 py-2 d-flex"},je={class:"border-b-sm"},Ye=w(()=>n("th",{class:"border-e-sm text-button font-weight-bold"},"노출여부",-1)),qe={class:"px-4 py-2"},ze=w(()=>n("th",{class:"border-e-sm text-button font-weight-bold"},"검색어",-1)),Ge={class:"px-4 py-2"},Je={class:"d-flex justify-sm-end ga-2"},We={class:"font-weight-bold"},Ke={class:"d-flex justify-space-between align-center mt-2 mb-3 px-6"},Qe={class:"d-flex justify-sm-end ga-2"};function Xe(f,s,g,e,H,I){return Q(),pe(Ce,null,[a(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),a(A,null,{default:l(()=>[a(y,{cols:"12"},{default:l(()=>[a(X,{rounded:"lg",class:"mt-4"},{default:l(()=>[n("table",Ae,[Re,n("tbody",null,[n("tr",Ue,[Le,n("td",He,[a(A,{dense:""},{default:l(()=>[a(y,{cols:"6"},{default:l(()=>[a(R,{items:e.parentCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:e.parentCategoryId,"onUpdate:modelValue":[s[0]||(s[0]=t=>e.parentCategoryId=t),e.onParentCategoryChange],"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1}),a(y,{cols:"6"},{default:l(()=>[a(R,{items:e.subCategoryItems,density:"compact","item-title":"text","item-value":"value",modelValue:e.subCategoryId,"onUpdate:modelValue":s[1]||(s[1]=t=>e.subCategoryId=t),"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1})]),_:1})]),Me,n("td",Oe,[a(e.DateFilter,{"is-have-period-type":!0,"period-type":e.periodType,"onUpdate:periodType":s[2]||(s[2]=t=>e.periodType=t),"pub-end-date":e.pubEndDate,"onUpdate:pubEndDate":s[3]||(s[3]=t=>e.pubEndDate=t),"pub-start-date":e.pubStartDate,"onUpdate:pubStartDate":s[4]||(s[4]=t=>e.pubStartDate=t)},null,8,["period-type","pub-end-date","pub-start-date"])])]),n("tr",je,[Ye,n("td",qe,[a(be,{inline:"",modelValue:e.selectedDisplayFlag,"onUpdate:modelValue":s[5]||(s[5]=t=>e.selectedDisplayFlag=t),"hide-details":"auto"},{default:l(()=>[a(U,{label:"전체",value:""}),a(U,{label:"노출",value:"Y"}),a(U,{label:"미노출",value:"N"})]),_:1},8,["modelValue"])]),ze,n("td",Ge,[a(A,{dense:""},{default:l(()=>[a(y,{cols:"4",md:"3"},{default:l(()=>[a(R,{items:e.querySelectionItems,"item-title":"text","item-value":"value",modelValue:e.keywordType,"onUpdate:modelValue":s[6]||(s[6]=t=>e.keywordType=t),"single-line":"",variant:"outlined","hide-details":""},null,8,["items","modelValue"])]),_:1}),a(y,{cols:"8",md:"6"},{default:l(()=>[a(ve,{variant:"outlined",color:"primary","hide-details":"true",modelValue:e.keyword,"onUpdate:modelValue":s[7]||(s[7]=t=>e.keyword=t),placeholder:"검색어를 입력하세요."},null,8,["modelValue"])]),_:1})]),_:1})])])])])]),_:1}),n("div",Je,[a(V,{type:"submit",class:"submit-btn mt-2",flat:"",color:"secondary",onClick:e.searchNotice,variant:"outlined"},{default:l(()=>[i("검색")]),_:1})])]),_:1}),a(y,{cols:"12"},{default:l(()=>[n("p",We,"총 "+p(e.totalCnt)+"개",1),a(X,{rounded:"lg",class:"card mt-4"},{default:l(()=>[a(ye,{loading:e.loading,headers:e.tableHeader,itemsLength:10,items:e.noticeBoardDocs,"item-value":"docId","show-select":"",modelValue:e.selectedRows,"onUpdate:modelValue":s[9]||(s[9]=t=>e.selectedRows=t),"onClick:row":e.openDetail},{"no-data":l(()=>[a(e.TableEmptyState)]),"item.no":l(({item:t})=>[i(p(t.no),1)]),"item.title":l(({item:t})=>[i(p(t.title)+" ",1),t.pinFlag==="Y"?(Q(),fe(ge,{key:0,class:"chip"},{default:l(()=>[i("상단고정")]),_:1})):De("",!0)]),"item.displayFlag":l(({value:t})=>[i(p(t==="Y"?"노출":"미노출"),1)]),"item.postPeriod":l(({item:t})=>[i(p(e.formatDatePeriod(t.pubStartDate))+" ~ "+p(t.pubEndDate===null?"상시":e.formatDatePeriod(t.pubEndDate)),1)]),"item.createDate":l(({item:t})=>[i(p(e.formatCreatedDate(t.createDate)),1)]),bottom:l(()=>[a(he),n("div",Ke,[n("div",Qe,[a(V,{type:"submit",class:"submit-btn mt-2",flat:"",color:"grey100",onClick:e.selectUnexposedItem},{default:l(()=>[i("선택 미노출")]),_:1}),a(V,{type:"submit",class:"submit-btn mt-2",flat:"",color:"error",disabled:!e.selectedRows.length,onClick:e.deleteNotices},{default:l(()=>[i("삭제")]),_:1},8,["disabled"])]),a(e.Pagination,{class:"d-flex align-center ml-4 elevation-0",modelValue:e.currentPage,"onUpdate:modelValue":s[8]||(s[8]=t=>e.currentPage=t),length:e.totalPages,"total-visible":7},null,8,["modelValue","length"]),a(V,{type:"submit",class:"submit-btn mt-2",flat:"",color:"grey200",onClick:e.registerNotice},{default:l(()=>[i("공지사항 등록")]),_:1})])]),_:2},1032,["loading","items","modelValue"])]),_:1})]),_:1})]),_:1})],64)}const pt=me(Pe,[["render",Xe],["__scopeId","data-v-93e2a87c"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR1000.vue"]]);export{pt as default};
