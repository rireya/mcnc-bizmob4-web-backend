import{d as z,j as o,E as J,p as P,k as M,_ as T,o as H,e as W,a as l,w as r,H as Y,a2 as G,I as q,g as F,h as C}from"./index-C5K_s1wl.js";import{B as K}from"./BaseBreadcrumb-DEdlJy1-.js";import{C as Q}from"./ContentForm-C-ZrhGrn.js";import{u as X,a as Z}from"./useNetwork-BBZmMd-V.js";import{u as $}from"./useCommonCode-DIzdSdac.js";import"./utils-CFlAkpuO.js";import"./common-AUcBvRqL.js";import"./LandingSelect-DityfkCS.js";const ee=z({__name:"ABOR3200",setup(f,{expose:t}){t();const B=o({title:"하이패스 인포 등록"}),e=o([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/contents"},{text:"하이패스 인포",disabled:!1,href:"/admin/contents"},{text:"하이패스 인포 등록",disabled:!0,href:"#"}]),g=X(),{confirm:p}=Z(),n=J(),{getLandingOptions:k}=$();P(()=>{R()});const m=o(null),I=o(null),y=o(""),U=o(""),v=o("N"),w=o("Y"),u=M({files:[],deleteFiles:[]}),N=o([]),R=async()=>{N.value=await k()},i=o([{metaDocId:"",contents:"",orderNo:1,imageFiles:{},linkLabel:"",linkType:"",linkValue:"",createDate:"",createBy:"",bodyDocId:"",linkUrl:"",landing:{type:null,value:null},deleteFlag:""}]),b=o(!1),D={page:B,breadcrumbs:e,network:g,confirm:p,router:n,getLandingOptions:k,parentCategoryId:m,subCategoryId:I,title:y,docId:U,pinFlag:v,displayFlag:w,imageFilesBanner:u,landingLocationOpts:N,getlandingLocationOpts:R,contentBlocks:i,loading:b,registerContent:async()=>{const{role:j}=await p("정말로 이 항목을 저장하시겠습니까?","저장","취소");if(j!=="confirm")return;if(!m.value)return alert("카테고리를 선택해주세요."),!1;if(!y.value)return alert("제목을 입력해주세요."),!1;if(u.files.length<=0)return alert("목록 배너를 등록해주세요."),!1;if(!i.value.every(a=>a.imageFiles.files))return alert("이미지 파일을 등록해주세요."),!1;if(!i.value.every(a=>a.contents!==""))return alert("본문글을 작성해주세요."),!1;b.value=!0;const c=new FormData,V={title:y.value,parentCategoryId:m.value,subCategoryId:I.value,displayFlag:w.value,pinFlag:v.value,imageFiles:u.files.map((a,s)=>({attachId:"",fileName:a.name,filePath:"",orderNo:s+1,fileSize:a.size}))},h=i.value.map((a,s)=>{var O,L,x;return{metaDocId:"",contents:a.contents||"",orderNo:s+1,imageFiles:(O=a.imageFiles.files)==null?void 0:O.map((d,_)=>({attachId:d.attachId||"",fileName:d.fileName||d.name,filePath:d.filePath||"",orderNo:_+1,fileSize:d.size})),linkLabel:a.linkLabel||"",linkType:((L=a.landing)==null?void 0:L.type)||"",linkValue:((x=a.landing)==null?void 0:x.value)||"",deleteFlag:a.deleteFlag||"N"}}),A=new Blob([JSON.stringify(V)],{type:"application/json"});c.append("metaRequest",A,"metaRequest.json");const S=new Blob([JSON.stringify(h)],{type:"application/json"});c.append("bodyRequests",S,"bodyRequests.json"),[...u.files.filter(a=>a instanceof File),...i.value.flatMap(a=>{var s;return((s=a.imageFiles)==null?void 0:s.files)||[]}).filter(a=>a instanceof File)].forEach(a=>{c.append("imageFiles",a,a.name)});const{status:E}=await g.post({url:"/board/hipassinfo/register",isLoading:!0,body:c});b.value=!1,E&&n.push("/contents")},BaseBreadcrumb:K,ContentForm:Q};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}});function te(f,t,B,e,g,p){return H(),W(G,null,[l(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),l(Y,null,{default:r(()=>[l(q,{cols:"12"},{default:r(()=>[l(e.ContentForm,{isForDetails:!1,pinFlag:e.pinFlag,"onUpdate:pinFlag":t[0]||(t[0]=n=>e.pinFlag=n),parentCategoryId:e.parentCategoryId,"onUpdate:parentCategoryId":t[1]||(t[1]=n=>e.parentCategoryId=n),subCategoryId:e.subCategoryId,"onUpdate:subCategoryId":t[2]||(t[2]=n=>e.subCategoryId=n),title:e.title,"onUpdate:title":t[3]||(t[3]=n=>e.title=n),contentBlocks:e.contentBlocks,"onUpdate:contentBlocks":t[4]||(t[4]=n=>e.contentBlocks=n),displayFlag:e.displayFlag,"onUpdate:displayFlag":t[5]||(t[5]=n=>e.displayFlag=n),fileBanner:e.imageFilesBanner,"onUpdate:fileBanner":t[6]||(t[6]=n=>e.imageFilesBanner=n),docId:e.docId,"landing-location-opts":e.landingLocationOpts},null,8,["pinFlag","parentCategoryId","subCategoryId","title","contentBlocks","displayFlag","fileBanner","docId","landing-location-opts"])]),_:1}),l(q,{cols:"12",class:"d-flex justify-space-between"},{default:r(()=>[l(F,{flat:"",color:"error",onClick:t[7]||(t[7]=n=>f.$router.back())},{default:r(()=>[C("취소")]),_:1}),l(F,{flat:"",color:"grey100",onClick:t[8]||(t[8]=n=>f.$router.push("/contents"))},{default:r(()=>[C("목록 이동")]),_:1}),l(F,{flat:"",color:"grey200",onClick:t[9]||(t[9]=n=>e.registerContent())},{default:r(()=>[C("등록")]),_:1})]),_:1})]),_:1})],64)}const pe=T(ee,[["render",te],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR3200.vue"]]);export{pe as default};
