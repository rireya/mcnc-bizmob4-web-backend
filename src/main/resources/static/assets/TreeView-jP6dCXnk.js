import{d as F,aw as K,l as M,ax as q,_ as Q,Q as X,o as y,e as T,f as E,ag as w,a as A,w as V,h as Y,U as P,T as Z,ay as z,az as L,aA as O,N as $,a4 as b,ad as U,a2 as R,a3 as G,c as H,aB as J,a1 as B,j,k as ee,v as W,s as D}from"./index-C5K_s1wl.js";const te=F({__name:"TreeItem",props:{item:{type:Object,required:!0},root:{type:Number,required:!0}},emits:["onCheckStateChange"],setup(d,{expose:g,emit:l}){g();const e=d,C=l,I=K(),_=M({get(){var c;return!!((c=e.item.state)!=null&&c.check)},set(c){e.item.state={...e.item.state,check:c}}}),m=q("global"),x=q("selected"),v=()=>{var c,t;e.item.state={...e.item.state,expanded:!((t=(c=e.item)==null?void 0:c.state)!=null&&t.expanded)},m==null||m.onClick(e.item)},p=(c,t)=>{!t||!t.length||t.forEach(a=>{a.state={...a.state,check:c,indeterminate:!1},a.children&&p(c,a.children)})},u={props:e,emits:C,slots:I,check:_,global:m,selected:x,onClick:v,updateChildState:p,onCheckBoxChange:c=>{e.item.children&&e.item.children.length&&p(c,e.item.children),c&&(e.item.state={...e.item.state,indeterminate:!1}),C("onCheckStateChange",e.item)},onChildStateChange:()=>{var c,t,a,o,s;if(e.item.children&&e.item.children.length){const r={check:(c=e.item.state)==null?void 0:c.check,indeterminate:(t=e.item.state)==null?void 0:t.indeterminate},i=e.item.children.every(n=>{var f;return(f=n.state)==null?void 0:f.check});i?e.item.state={...e.item.state,indeterminate:!1}:e.item.children.some(n=>{var f,h;return((f=n.state)==null?void 0:f.check)||((h=n.state)==null?void 0:h.indeterminate)})?e.item.state={...e.item.state,indeterminate:!0}:e.item.state={...e.item.state,indeterminate:!1},((a=e.item.state)==null?void 0:a.check)!==i&&(e.item.state={...e.item.state,check:i}),(r.check!==((o=e.item.state)==null?void 0:o.check)||r.indeterminate!==((s=e.item.state)==null?void 0:s.indeterminate))&&C("onCheckStateChange",e.item)}}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),se={class:"item-start"},ie={class:"pa-2 text-no-wrap"},ne={key:0,class:"nested-tree-item"};function ae(d,g,l,e,C,I){var m,x,v,p,S;const _=X("TreeItem",!0);return y(),T("div",{class:U(["tree-item-container",{root:l.root===0}])},[E("div",{class:U(["tree-item",{open:((x=(m=l.item)==null?void 0:m.state)==null?void 0:x.expanded)&&((v=l.item.children)==null?void 0:v.length),selected:e.selected===l.item.id}]),onClick:O(e.onClick,["stop"])},[E("div",se,[w(d.$slots,"icon",z(L(l.item)),()=>[A(Z,{size:"large",class:"cursor-pointer"},{default:V(()=>{var k,u,c,t;return[Y(P((u=(k=l.item)==null?void 0:k.children)!=null&&u.length?(t=(c=l.item)==null?void 0:c.state)!=null&&t.expanded?"mdi-menu-down":"mdi-menu-right":""),1)]}),_:1})],!0)]),(p=e.global)!=null&&p.useSelect?(y(),T("div",{key:0,onClick:g[1]||(g[1]=O(()=>{},["stop"]))},[A($,{modelValue:e.check,"onUpdate:modelValue":[g[0]||(g[0]=k=>e.check=k),e.onCheckBoxChange],class:"checkbox",density:"compact","hide-details":"hide","true-icon":"mdi-checkbox-marked-outline","false-icon":"mdi-checkbox-blank-outline",indeterminate:(S=l.item.state)==null?void 0:S.indeterminate},null,8,["modelValue","indeterminate"])])):b("",!0),w(d.$slots,"pre-icon",z(L(l.item)),void 0,!0),E("p",ie,P(l.item.label),1)],2),l.item.children&&l.item.state&&l.item.state.expanded?(y(),T("div",ne,[(y(!0),T(R,null,G(l.item.children,k=>(y(),H(_,{key:k.id,item:k,root:l.root+1,onOnCheckStateChange:e.onChildStateChange},J({_:2},[d.$slots.icon?{name:"icon",fn:V(u=>[w(d.$slots,"icon",B({ref_for:!0},u),void 0,!0)]),key:"0"}:void 0,d.$slots["pre-icon"]?{name:"pre-icon",fn:V(u=>[w(d.$slots,"pre-icon",B({ref_for:!0},u),void 0,!0)]),key:"1"}:void 0]),1032,["item","root"]))),128))])):b("",!0)],2)}const re=Q(te,[["render",ae],["__scopeId","data-v-85557f9b"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/components/TreeView/TreeItem.vue"]]),ce=F({__name:"TreeView",props:{listItem:{type:Array,required:!0},filterText:{type:String,required:!1},useSelect:{type:Boolean,required:!1},selected:{type:[String,Number],required:!1}},emits:["click"],setup(d,{expose:g,emit:l}){const e=d,C=l,I=j(e.listItem),_=ee({selected:null,useSelect:e.useSelect??!1,onClick:t=>{C("click",t)}});W("global",_),W("selected",M(()=>e.selected)),D(()=>e.filterText,()=>{I.value=m(e.listItem,e.filterText??"")}),D(()=>e.listItem,()=>{I.value=e.filterText?m(e.listItem,e.filterText??""):e.listItem});const m=(t,a,o)=>{const s=(i,n)=>{var f;if(n.label.toLowerCase().includes(a.toLowerCase()))return(f=n.children)==null||f.forEach(h=>{h.state=o?{...h.state}:{...h.state,expanded:!1}}),n.state=o?{...n.state}:{...n.state,expanded:!1},i.push(n),i;if(Array.isArray(n.children)){const h=n.children.reduce(s,[]);h.length?(n.state=o?{...n.state}:{...n.state,expanded:!0},i.push({...n,children:h})):n.state=o?{...n.state}:{...n.state,expanded:!1}}else n.state=o?{...n.state}:{...n.state,expanded:!1};return i},r=t.reduce(s,[]);return r.length||t.forEach(i=>{i.state={...i.state,expanded:!0},r.push({...i,children:[]})}),a||t.forEach(i=>{i.state={...i.state,expanded:!0}}),r},x=(t,a)=>{var o;for(let s=t.length-1;s>=0;s--){const r=t[s];(o=r.children)!=null&&o.length&&x(r.children,a),a(r)}},v=(t,a=!0,o=!1)=>{x(e.listItem,s=>{var r;if(t.includes(s.id)?a?s.state={...s.state,check:!0,indeterminate:!1}:s.state={...s.state,check:!1}:o&&(s.state={...s.state,check:!1}),(r=s.children)!=null&&r.length){const i=s.children.every(f=>{var h;return(h=f.state)==null?void 0:h.check}),n=s.children.some(f=>{var h,N;return((h=f.state)==null?void 0:h.check)||((N=f.state)==null?void 0:N.indeterminate)});i?s.state={...s.state,indeterminate:!1,check:!0}:n?s.state={...s.state,indeterminate:!0,check:!1}:s.state={...s.state,indeterminate:!1,check:!1}}})},p=t=>{var o,s,r;const a=new Array;for(let i=0;i<t.length;i++)((o=t[i].state)!=null&&o.check||(s=t[i].state)!=null&&s.indeterminate)&&a.push(t[i].id),(r=t[i].children)!=null&&r.length&&a.push(...p(t[i].children));return a},S=t=>{var o,s;const a=new Array;for(let r=0;r<t.length;r++)(o=t[r].state)!=null&&o.expanded&&a.push(t[r].id),(s=t[r].children)!=null&&s.length&&a.push(...S(t[r].children));return a},k=()=>p(e.listItem),u=()=>S(e.listItem);g({checkItems:v,getSelectedItems:k,getExpandedItems:u});const c={props:e,emits:C,list:I,global:_,filter:m,reverseTraverse:x,checkItems:v,getSelectedItemsIds:p,getExpandedItemsIds:S,getSelectedItems:k,getExpandedItems:u,TreeItem:re};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),le={class:"tree"};function oe(d,g,l,e,C,I){return y(),T("div",le,[(y(!0),T(R,null,G(e.list,_=>(y(),H(e.TreeItem,{key:_.id,item:_,root:0},J({_:2},[d.$slots.icon?{name:"icon",fn:V(m=>[w(d.$slots,"icon",B({ref_for:!0},m),void 0,!0)]),key:"0"}:void 0,d.$slots["pre-icon"]?{name:"pre-icon",fn:V(m=>[w(d.$slots,"pre-icon",B({ref_for:!0},m),void 0,!0)]),key:"1"}:void 0]),1032,["item"]))),128))])}const me=Q(ce,[["render",oe],["__scopeId","data-v-4174de41"],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/components/TreeView/TreeView.vue"]]);export{me as T};
