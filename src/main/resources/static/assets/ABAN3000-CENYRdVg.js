import{d as x,j as c,E,p as k,_ as U,o as y,e as C,a as l,w as r,H as I,a2 as T,I as S,f as _,U as m,g as w,h as P,J as j,af as R,aA as L,a4 as q}from"./index-C5K_s1wl.js";import{B as z}from"./BaseBreadcrumb-DEdlJy1-.js";import{S as J,a as W}from"./StatusSwitch-32i-X-JE.js";import{a as G}from"./useNetwork-BBZmMd-V.js";import{u as K}from"./useBannerMgmt-Citl6Y3L.js";import{b as f}from"./common-AUcBvRqL.js";import{f as Q}from"./utils-CFlAkpuO.js";import"./TableEmptyState-DTIE6Crm.js";const X=x({__name:"ABAN3000",setup(Y,{expose:n}){n();const h=c({title:"홈 팝업 배너 관리"}),e=c([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"배너 관리",disabled:!1,href:"/admin/banner"},{text:"홈 팝업 배너 관리",disabled:!0,href:"#"}]),{alert:g}=G(),u=E(),{deleteBanner:a,reqBannerList:o,updateDisplayFlag:D,reorderBanner:B}=K(),V=[{title:"롤링순서",value:"rollingSortOrder"},{title:"배너 썸네일",value:"attachFile"},{title:"삭제",value:"delete"},{title:"랜딩위치",value:"landingType"},{title:"게시기간",value:"postingPeriod"},{title:"노출여부",value:"displayFlag"},{title:"등록일",value:"createDate"}],i=c([]),b=c(!1),d=async()=>{b.value=!0;const{status:t,data:s}=await o(f.HOME_POPUP);b.value=!1,t&&(i.value=s.bannerDocs.sort((p,H)=>Number(H.rollingSortOrder)-Number(p.rollingSortOrder)))},F=async t=>{const s=await a(f.HOME_POPUP,t);s&&s.status&&d()},M=async t=>{const{status:s}=await D(f.HOME_POPUP,t.docId,t.displayFlag);if(!s){t.displayFlag=t.displayFlag==="Y"?"N":"Y";return}d()},N=async()=>{const{status:t}=await B(f.HOME_POPUP,i.value.map((s,p)=>({docId:s.docId,rollingSortOrder:(i.value.length-p).toString()})));t&&d()},A=async()=>{if(i.value.length>=15){g("홈 팜업배너는 15개까지 등록가능합니다.",void 0,"등록 개수가 초과되었습니다.");return}u.push("/popup-banners/register")},O=async t=>{u.push("/popup-banners/"+t.docId)};k(()=>{d()});const v={page:h,breadcrumbs:e,alert:g,router:u,deleteBanner:a,reqBannerList:o,updateDisplayFlag:D,reorderBanner:B,tableHeaders:V,banners:i,loading:b,getBannerList:d,onDeleteBanner:F,updateStatus:M,reorder:N,registerBanner:A,bannerDetails:O,BaseBreadcrumb:z,get SortableTable(){return J},get StatusSwitch(){return W},get formatDate(){return Q}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),Z={class:"d-flex justify-space-between align-center"},$={class:"text-subtitle-1 font-weight-bold"},ee=["src"];function ae(Y,n,h,e,g,u){return y(),C(T,null,[l(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),l(I,{class:"mt-4"},{default:r(()=>[l(S,{cols:"12"},{default:r(()=>[_("div",Z,[_("p",$,"총 "+m(e.banners.length)+"개",1),l(w,{flat:"",color:"grey200",onClick:e.registerBanner},{default:r(()=>[P("등록하기")]),_:1})])]),_:1}),l(S,{cols:"12"},{default:r(()=>[l(j,{rounded:"lg",class:"overflow-hidden"},{default:r(()=>[l(R,{class:"pa-0"},{default:r(()=>[l(e.SortableTable,{headers:e.tableHeaders,modelValue:e.banners,"onUpdate:modelValue":n[0]||(n[0]=a=>e.banners=a),"item-key":"docId",onChange:e.reorder,loading:e.loading,"onClick:row":n[1]||(n[1]=a=>e.bannerDetails(a))},{"item-delete":r(a=>[l(w,{flat:"",icon:"mdi-trash-can-outline",size:"small",onClick:L(o=>e.onDeleteBanner(a.data.docId),["stop"]),variant:"text"},null,8,["onClick"])]),"item-attachFile":r(({data:a})=>[a.attachFile?(y(),C("img",{key:0,src:a.attachFile.filePath,alt:"",srcset:"",width:"200"},null,8,ee)):q("",!0)]),"item-postingPeriod":r(({data:a})=>[_("p",null,m(e.formatDate(a.pubStartDate,"YYYY[.]MM[.]DD HH:mm"))+" ~ "+m(a.pubAlwaysFlag==="Y"?"상시":e.formatDate(a.pubEndDate,"YYYY[.]MM[.]DD HH:mm")),1)]),"item-createDate":r(({data:a})=>[P(m(e.formatDate(a.createDate,"YYYY[.]MM[.]DD")),1)]),"item-displayFlag":r(({index:a})=>[l(e.StatusSwitch,{modelValue:e.banners[a].displayFlag,"onUpdate:modelValue":o=>e.banners[a].displayFlag=o,"true-value":"Y","false-value":"N",onChange:o=>e.updateStatus(e.banners[a])},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["modelValue","loading"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ue=U(X,[["render",ae],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABAN/ABAN3000.vue"]]);export{ue as default};
