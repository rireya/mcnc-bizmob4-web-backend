import{d as H,j as h,l as z,p as W,B as X,_ as G,o as b,c as x,w as d,a,J as w,af as v,e as T,f as t,U as f,M as E,ak as Z,al as j,a4 as $,g as A,h as y,at as ee,ad as te,au as oe,k as se,Q as ae,H as de,a2 as ce,I as U,T as le}from"./index-C5K_s1wl.js";import{B as ie}from"./BaseBreadcrumb-DEdlJy1-.js";import{T as ne}from"./TreeView-jP6dCXnk.js";import{u as re}from"./useModal-YcZHZcUY.js";import{u as ue,a as Ce}from"./useNetwork-BBZmMd-V.js";import{f as me}from"./utils-CFlAkpuO.js";const _e=H({__name:"ACOD1100",props:{instance:{type:Object,required:!1},modify:{type:Boolean,required:!1},codePath:{type:String,required:!1},code:{type:String,required:!1},codeName:{type:String,required:!1},codeActivation:{type:String,required:!1},registerDate:{type:String,required:!1},defineType:{type:String,required:!1},codeAlias:{type:String,required:!1}},emits:["close"],setup(F,{expose:C,emit:i}){C();const e=F,p=i,m=h(e.codeName??""),r=h(e.codeAlias??""),_=h(e.codeActivation??"N"),D=h(e.registerDate??""),B=z(()=>!m.value.trim());W(()=>{e.instance&&e.instance.dispatchMounted()}),X(()=>{e.instance&&e.instance.dispatchUnmounted()});const N={props:e,emit:p,codeName:m,codeAlias:r,codeActivation:_,registerDate:D,disabled:B,confirm:()=>{e.instance&&e.instance.dismiss({code:e.code,codeName:m.value,codeActivation:_.value,codeAlias:r.value},"confirm")},deleteCode:()=>{e.instance&&e.instance.dismiss({code:e.code},"delete")}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),fe={key:0,class:"text-h6 font-weight-bold"},be={key:1,class:"text-h6 font-weight-bold"},he={class:"form-table"},pe=t("colgroup",null,[t("col",{style:{width:"124px"}}),t("col")],-1),De={class:"border-b-sm"},Be=t("th",{class:"pa-4 border-e-sm text-start"},"공통 코드 위치",-1),ye={class:"pl-3"},Ae={class:"border-b-sm"},ge=t("th",{class:"pa-4 border-e-sm text-start"},"공통 코드",-1),xe={class:"px-3"},we={class:"border-b-sm"},ve=t("th",{class:"pa-4 border-e-sm text-start"},"공통 코드명",-1),Fe={class:"px-3"},Ne={class:"border-b-sm"},ke=t("th",{class:"pa-4 border-e-sm text-start"},"코드 별칭",-1),Ve={class:"px-3"},Te={class:""},Se=t("th",{class:"pa-4 border-e-sm text-start"},"상태",-1),Me={class:"px-3"},Ee={key:0,class:"border-t-sm"},Oe=t("th",{class:"pa-4 border-e-sm text-start"},"등록일시",-1),Ye={class:"px-3"},Ie={class:"d-flex justify-space-between pt-4 border-t-sm"};function qe(F,C,i,e,p,m){return b(),x(oe,{"max-width":"800","model-value":i.instance&&i.instance.active,onAfterLeave:C[3]||(C[3]=r=>e.emit("close")),persistent:i.instance&&i.instance.persistent,class:te(i.instance&&i.instance.cssClass)},{default:d(()=>[a(w,{rounded:"xl",elevation:"0"},{default:d(()=>[a(v,{class:"pa-4"},{default:d(()=>[i.modify?(b(),T("p",fe,"공통 코드 수정")):(b(),T("p",be,"공통 코드 추가")),a(w,{class:"my-4 overflow-hidden border-sm",elevation:"0",rounded:"lg"},{default:d(()=>[a(v,{class:"pa-0"},{default:d(()=>[t("table",he,[pe,t("tbody",null,[t("tr",De,[Be,t("td",ye,f(i.codePath),1)]),t("tr",Ae,[ge,t("td",xe,[a(E,{"hide-details":"auto",value:i.code,class:"w-sm-50",density:"compact",disabled:""},null,8,["value"])])]),t("tr",we,[ve,t("td",Fe,[a(E,{"hide-details":"auto",class:"w-sm-50",density:"compact",placeholder:"공통 코드명을 입력해 주세요",modelValue:e.codeName,"onUpdate:modelValue":C[0]||(C[0]=r=>e.codeName=r)},null,8,["modelValue"])])]),t("tr",Ne,[ke,t("td",Ve,[a(E,{"hide-details":"auto",class:"w-sm-50",density:"compact",placeholder:"코드 별칭을 입력해 주세요",modelValue:e.codeAlias,"onUpdate:modelValue":C[1]||(C[1]=r=>e.codeAlias=r),disabled:""},null,8,["modelValue"])])]),t("tr",Te,[Se,t("td",Me,[a(Z,{inline:"","hide-details":"auto",density:"compact",modelValue:e.codeActivation,"onUpdate:modelValue":C[2]||(C[2]=r=>e.codeActivation=r)},{default:d(()=>[a(j,{label:"활성",value:"Y",class:"mr-4"}),a(j,{label:"비활성",value:"N"})]),_:1},8,["modelValue"])])]),i.modify?(b(),T("tr",Ee,[Oe,t("td",Ye,f(e.registerDate),1)])):$("",!0)])])]),_:1})]),_:1}),t("div",Ie,[i.code?(b(),x(A,{key:0,flat:"",color:"error",onClick:e.deleteCode,disabled:i.defineType==="SYSTEM"},{default:d(()=>[y("삭제")]),_:1},8,["disabled"])):(b(),x(ee,{key:1})),i.modify?(b(),x(A,{key:2,flat:"",color:"grey200",onClick:e.confirm,disabled:e.disabled},{default:d(()=>[y("수정 완료")]),_:1},8,["disabled"])):(b(),x(A,{key:3,flat:"",color:"grey200",onClick:e.confirm,disabled:e.disabled},{default:d(()=>[y("추가 완료")]),_:1},8,["disabled"]))])]),_:1})]),_:1})]),_:1},8,["model-value","persistent","class"])}const R=G(_e,[["render",qe],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ACOD/ACOD1100.vue"]]),Le=H({__name:"ACOD1000",setup(F,{expose:C}){C();const i=h({title:"공통 코드 관리"}),e=h([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"관리자 기능",disabled:!1,href:"/admin/common-code"},{text:"코드 관리",disabled:!0,href:"#"}]),p=re(),m=ue(),{alert:r}=Ce(),_=z(()=>c=>c?me(c,"YYYY/MM/DD HH:mm:ss"):""),D=h(),B=h([]),o=se({location:"",registerDate:"",lastModify:"",active:"",code:"",codeName:"",codeAlias:null}),O=c=>{var l;o.code!==c.id&&(o.code=""+c.id,I(o.code,((l=c.customData)==null?void 0:l.location)??""))},N=()=>{k()},Y=c=>{var u;const l=(u=D.value)==null?void 0:u.getExpandedItems(),s=(S,P)=>S.map(n=>{const M=(P?P+" > ":"")+n.codeName;return o.code&&n.codeId===o.code&&(o.codeName=n.codeName,o.location=M,o.registerDate=n.createDate,o.lastModify=n.updateDate??"",o.active=n.status==="1"?"Y":"N",o.defineType=n.defineType,o.codeAlias=n.codeAlias),{id:n.codeId,label:n.codeName,state:l&&l.includes(n.codeId)?{expanded:!0}:void 0,customData:{location:M,registerDate:n.createDate,lastModify:n.updateDate??"",active:n.status==="1"?"Y":"N"},children:n.subCommonCodeList?s(n.subCommonCodeList,M):void 0}});B.value=s(c)},g=async()=>{const{status:c,data:l}=await m.post({url:"/commonCode/list"});c&&Y(l.commonCodeList)},k=()=>{o.code="",o.codeName="",o.location="",o.registerDate="",o.lastModify="",o.active="",o.defineType=void 0,o.codeAlias=null},I=async(c,l)=>{const{status:s,data:u}=await m.post({url:"/commonCode/detail",body:{codeId:c}});if(!s)return k();o.code=u.codeId,o.codeName=u.codeName,o.location=l,o.registerDate=u.createDate,o.lastModify=u.updateDate??"",o.active=u.status==="1"?"Y":"N",o.defineType=u.defineType,o.codeAlias=u.codeAlias},J=async()=>{const c=await p.create({component:R,componentProps:{codePath:o.location,code:o.code}});await c.present();const{role:l,data:s}=await c.onUnmounted();if(l==="delete")return V(s.code);if(l!="confirm")return;if(!(s!=null&&s.codeName)){r("공통 코드 이름을 입력하세요");return}console.log(s);const{status:u}=await m.post({url:"/commonCode/register",body:{parentCodeId:o.code??null,codeName:s.codeName,status:(s==null?void 0:s.codeActivation)==="Y"?"1":"0",codeAlias:s.codeAlias??""}});u&&g()},Q=()=>{o.code&&V(o.code)},V=async c=>{const{status:l}=await m.post({url:"/commonCode/delete",body:{codeId:c}});l&&(g(),k())},K=async()=>{const c=await p.create({component:R,componentProps:{modify:!0,codePath:o.location,code:o.code,codeName:o.codeName,codeActivation:o.active,registerDate:o.registerDate,defineType:o.defineType,codeAlias:o.codeAlias}});c.present();const{role:l,data:s}=await c.onUnmounted();if(l==="delete")V(s.code);else if(l==="confirm"){if(!(s!=null&&s.codeName)){r("공통 코드 이름을 입력하세요");return}q(s.code,s.codeName,s.codeActivation,s.codeAlias)}},q=async(c,l,s,u)=>{const{status:S}=await m.post({url:"/commonCode/update",body:{codeId:c,codeName:l,status:s==="Y"?"1":"0",codeAlias:u??""}});S&&g()};W(()=>{g()});const L={page:i,breadcrumbs:e,modal:p,network:m,alert:r,formatDate:_,treeRef:D,treeList:B,selectedCode:o,onTreeClick:O,onClickOutSideTree:N,mappingList:Y,reqCodeList:g,resetDetails:k,setDetails:I,addCodeBtn:J,deleteBtn:Q,deleteCode:V,editBtn:K,editCode:q,BaseBreadcrumb:ie,TreeView:ne};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Pe=t("p",{class:"text-h6 font-weight-bold mb-4"},"공통 코드 목록",-1),je={class:"d-flex justify-end mt-2 ga-2"},Ue=t("p",{class:"text-h6 font-weight-bold mb-4"},"공통 코드 상세 정보",-1),Re={class:"form-table"},He=t("colgroup",null,[t("col",{style:{width:"124px"}}),t("col")],-1),ze={class:"border-b-sm"},We=t("th",{class:"pa-4 border-e-sm text-start"},"공통 코드 위치",-1),Ge={class:"pl-3"},Je={class:"border-b-sm"},Qe=t("th",{class:"pa-4 border-e-sm text-start"},"공통 코드",-1),Ke={class:"pl-3"},Xe={class:"border-b-sm"},Ze=t("th",{class:"pa-4 border-e-sm text-start"},"공통 코드명",-1),$e={class:"pl-3"},et={class:"border-b-sm"},tt=t("th",{class:"pa-4 border-e-sm text-start"},"코드 별칭",-1),ot={class:"pl-3"},st={class:"border-b-sm"},at=t("th",{class:"pa-4 border-e-sm text-start"},"상태",-1),dt={class:"pl-3"},ct={class:"border-b-sm"},lt=t("th",{class:"pa-4 border-e-sm text-start"},"등록일시",-1),it={class:"pl-3"},nt={class:"border-b-sm"},rt=t("th",{class:"pa-4 border-e-sm text-start"},"마지막 수정일시",-1),ut={class:"pl-3"},Ct={class:"d-flex justify-space-between mt-2"};function mt(F,C,i,e,p,m){const r=ae("perfect-scrollbar");return b(),T(ce,null,[a(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),a(de,{class:"mt-4"},{default:d(()=>[a(U,{cols:"4"},{default:d(()=>[Pe,a(w,{rounded:"lg"},{default:d(()=>[a(v,{class:"pa-3"},{default:d(()=>[a(w,null,{default:d(()=>[a(v,{class:"pa-2"},{default:d(()=>[a(r,{style:{height:"590px"},onClick:e.onClickOutSideTree},{default:d(()=>[a(e.TreeView,{listItem:e.treeList,ref:"treeRef",onClick:e.onTreeClick,selected:e.selectedCode.code},{icon:d(_=>[a(le,{class:"cursor-pointer",size:"large"},{default:d(()=>{var D,B;return[y(f(_.children&&_.children.length||(D=_==null?void 0:_.customData)!=null&&D.root?(B=_.state)!=null&&B.expanded?"mdi-folder-open-outline ":"mdi-folder-outline":"mdi-file"),1)]}),_:2},1024)]),_:1},8,["listItem","selected"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t("div",je,[a(A,{flat:"",color:"grey200",onClick:e.addCodeBtn},{default:d(()=>[y("공통 코드 추가")]),_:1})])]),_:1}),a(U,{cols:"8"},{default:d(()=>[Ue,a(w,{rounded:"lg",class:"overflow-hidden"},{default:d(()=>[a(v,{class:"pa-0"},{default:d(()=>[t("table",Re,[He,t("tbody",null,[t("tr",ze,[We,t("td",Ge,f(e.selectedCode.location),1)]),t("tr",Je,[Qe,t("td",Ke,f(e.selectedCode.code),1)]),t("tr",Xe,[Ze,t("td",$e,f(e.selectedCode.codeName),1)]),t("tr",et,[tt,t("td",ot,f(e.selectedCode.codeAlias),1)]),t("tr",st,[at,t("td",dt,f(e.selectedCode.active?e.selectedCode.active==="Y"?"활성":"비활성":""),1)]),t("tr",ct,[lt,t("td",it,f(e.formatDate(e.selectedCode.registerDate)),1)]),t("tr",nt,[rt,t("td",ut,f(e.formatDate(e.selectedCode.lastModify)),1)])])])]),_:1})]),_:1}),t("div",Ct,[a(A,{flat:"",color:"error",onClick:e.deleteBtn,disabled:!e.selectedCode.code||e.selectedCode.defineType==="SYSTEM"},{default:d(()=>[y("삭제")]),_:1},8,["disabled"]),a(A,{flat:"",color:"grey200",onClick:e.editBtn,disabled:!e.selectedCode.code},{default:d(()=>[y("수정")]),_:1},8,["disabled"])])]),_:1})]),_:1})],64)}const Bt=G(Le,[["render",mt],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ACOD/ACOD1000.vue"]]);export{Bt as default};
