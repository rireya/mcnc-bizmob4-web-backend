import{d as Q,E as X,j as n,p as Z,k as N,_ as h,o as _,e as $,a as l,w as r,H as ee,a2 as te,I as H,g as E,h as w}from"./index-C5K_s1wl.js";import{B as ae}from"./BaseBreadcrumb-DEdlJy1-.js";import{E as ne}from"./EventForm-Bv582PYY.js";import{f as oe}from"./utils-CFlAkpuO.js";import{a as le,u as ie}from"./useNetwork-BBZmMd-V.js";import{u as se}from"./useCommonCode-DIzdSdac.js";import"./PeriodDate-Y1bD6Y6f.js";import"./format-CimBkJP1.js";import"./LandingSelect-DityfkCS.js";import"./common-AUcBvRqL.js";const re=Q({__name:"ABOR2200",setup(g,{expose:t}){t();const m=X(),{confirm:e,alert:i}=le(),p=ie(),a=n({title:"이벤트 등록"}),J=n([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"게시판 관리",disabled:!1,href:"/admin/events"},{text:"이벤트",disabled:!1,href:"/admin/events"},{text:"이벤트 등록",disabled:!0,href:"#"}]);Z(()=>{U()});const{getLandingOptions:R}=se(),S=n([]),U=async()=>{S.value=await R()},b=N({type:null,value:null}),y=n(!1),v=n(null),k=n(null),F=n(""),O=n(""),x=n(0),P=n(""),c=n(""),q=n(""),A=n("Y"),L=n("N"),M=n("N"),D=n(null),C=n(null),j=n(!1),d=N({files:[],deleteFiles:[]}),u=N({files:[],deleteFiles:[]});function B(f){if(!f)return null;const s=new Date(f);return oe(s,"yyyy-MM-DDTHH:mm:ss")}const V={router:m,confirm:e,alert:i,network:p,page:a,breadcrumbs:J,getLandingOptions:R,landingLocationOpts:S,getlandingLocationOpts:U,landing:b,loading:y,parentCategoryId:v,subCategoryId:k,title:F,cautionMatter:O,orderNo:x,btnName:P,contents:c,headDocId:q,displayFlag:A,pinFlag:L,pubAlwaysFlag:M,pubStartDate:D,pubEndDate:C,selectedPeriod:j,imageFiles:d,imageFileBanner:u,formatToISO:B,registerEvent:async()=>{const{role:f}=await e("정말로 이 항목을 저장하시겠습니까?","저장","취소");if(f!="confirm")return;if(!v.value)return i("카테고리를 선택해주세요."),!1;if(!F.value)return i("제목을 입력해주세요."),!1;if(!D.value||!C.value&&!j.value)return i("시작일과 마감일을 선택해주세요."),!1;if(u.files.length<=0)return i("목록 배너를 등록해주세요."),!1;if(d.files.length<=0&&!c.value)return i("이미지 파일 등록 혹은 이벤트 내용을 입력해주세요"),!1;y.value=!0;const s=new FormData,T={title:F.value,imageFiles:u.files.map((o,I)=>({attachId:"",fileName:o.name,filePath:"",orderNo:I+1,fileSize:o.size})),parentCategoryId:v.value,subCategoryId:k.value,displayFlag:A.value,pinFlag:L.value,pubAlwaysFlag:M.value,pubStartDate:B(D.value),pubEndDate:B(C.value)},W={headDocId:q.value,contents:c.value,imageFiles:d.files.map((o,I)=>({attachId:"",fileName:o.name,filePath:"",orderNo:I+1,fileSize:o.size})),cautionMatter:O.value,btnName:P.value,btnLinkType:b.type,btnLinkLocation:b.value??"",orderNo:x.value},Y=new Blob([JSON.stringify(T)],{type:"application/json"});s.append("headRequest",Y,"headRequest.json");const G=new Blob([JSON.stringify(W)],{type:"application/json"});s.append("bodyRequest",G,"bodyRequest.json");const z=[...d.files.filter(o=>o instanceof File),...u.files.filter(o=>o instanceof File)];z.length>0&&z.forEach(o=>{s.append("imageFiles",o,o.name)});const{status:K}=await p.post({url:"/board/eventboard/register",isLoading:!0,body:s});y.value=!1,K&&m.push("/events")},BaseBreadcrumb:ae,EventForm:ne};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}});function de(g,t,m,e,i,p){return _(),$(te,null,[l(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),l(ee,null,{default:r(()=>[l(H,{cols:"12"},{default:r(()=>[l(e.EventForm,{isForDetails:!1,selectedPeriod:e.selectedPeriod,"onUpdate:selectedPeriod":t[0]||(t[0]=a=>e.selectedPeriod=a),pinFlag:e.pinFlag,"onUpdate:pinFlag":t[1]||(t[1]=a=>e.pinFlag=a),pubStartDate:e.pubStartDate,"onUpdate:pubStartDate":t[2]||(t[2]=a=>e.pubStartDate=a),pubEndDate:e.pubEndDate,"onUpdate:pubEndDate":t[3]||(t[3]=a=>e.pubEndDate=a),note:e.cautionMatter,"onUpdate:note":t[4]||(t[4]=a=>e.cautionMatter=a),btnName:e.btnName,"onUpdate:btnName":t[5]||(t[5]=a=>e.btnName=a),parentCategoryId:e.parentCategoryId,"onUpdate:parentCategoryId":t[6]||(t[6]=a=>e.parentCategoryId=a),subCategoryId:e.subCategoryId,"onUpdate:subCategoryId":t[7]||(t[7]=a=>e.subCategoryId=a),title:e.title,"onUpdate:title":t[8]||(t[8]=a=>e.title=a),imageFiles:e.imageFiles,"onUpdate:imageFiles":t[9]||(t[9]=a=>e.imageFiles=a),contents:e.contents,"onUpdate:contents":t[10]||(t[10]=a=>e.contents=a),displayFlag:e.displayFlag,"onUpdate:displayFlag":t[11]||(t[11]=a=>e.displayFlag=a),imageFileBanner:e.imageFileBanner,"onUpdate:imageFileBanner":t[12]||(t[12]=a=>e.imageFileBanner=a),postId:e.headDocId,"landing-location-opts":e.landingLocationOpts,landing:e.landing,"onUpdate:landing":t[13]||(t[13]=a=>e.landing=a)},null,8,["selectedPeriod","pinFlag","pubStartDate","pubEndDate","note","btnName","parentCategoryId","subCategoryId","title","imageFiles","contents","displayFlag","imageFileBanner","postId","landing-location-opts","landing"])]),_:1}),l(H,{cols:"12",class:"d-flex justify-space-between"},{default:r(()=>[l(E,{flat:"",color:"grey100",onClick:t[14]||(t[14]=a=>g.$router.back())},{default:r(()=>[w("취소")]),_:1}),l(E,{flat:"",color:"grey100",onClick:t[15]||(t[15]=a=>g.$router.push("/events"))},{default:r(()=>[w("목록 이동")]),_:1}),l(E,{flat:"",color:"grey200",onClick:t[16]||(t[16]=a=>e.registerEvent())},{default:r(()=>[w("등록")]),_:1})]),_:1})]),_:1})],64)}const Ce=h(re,[["render",de],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABOR/ABOR2200.vue"]]);export{Ce as default};
