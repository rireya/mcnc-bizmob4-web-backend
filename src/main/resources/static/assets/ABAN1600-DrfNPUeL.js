import{d as Y,j as u,E as M,p as O,_ as H,o as v,e as y,a as r,w as s,H as U,a2 as j,I as D,f as S,U as w,g as F,h as N,J as P,af as R,aA as L,a4 as q}from"./index-C5K_s1wl.js";import{B as z}from"./BaseBreadcrumb-DEdlJy1-.js";import{S as J,a as W}from"./StatusSwitch-32i-X-JE.js";import{a as G}from"./useNetwork-BBZmMd-V.js";import{u as K}from"./useBannerMgmt-Citl6Y3L.js";import{b as m}from"./common-AUcBvRqL.js";import{f as Q}from"./utils-CFlAkpuO.js";import"./TableEmptyState-DTIE6Crm.js";const X=Y({__name:"ABAN1600",setup(C,{expose:n}){n();const p=u({title:"혜택배너 관리"}),e=u([{text:"Dashboard (Home)",disabled:!1,href:"/admin/dashboard"},{text:"배너 관리",disabled:!1,href:"/admin/banner"},{text:"혜택배너 관리",disabled:!0,href:"#"}]),{alert:f}=G(),c=M(),{deleteBanner:a,reqBannerList:o,updateDisplayFlag:h,reorderBanner:_}=K(),V=[{title:"롤링순서",value:"rollingSortOrder"},{title:"배너 썸네일",value:"attachFile"},{title:"삭제",value:"delete"},{title:"랜딩위치",value:"landingType"},{title:"노출여부",value:"displayFlag"},{title:"등록일",value:"createDate"}],i=u([]),b=u(!1),d=async()=>{b.value=!0;const{status:t,data:l}=await o(m.BENEFIT);b.value=!1,t&&(i.value=l.bannerDocs.sort((g,k)=>Number(k.rollingSortOrder)-Number(g.rollingSortOrder)))},E=async t=>{const l=await a(m.BENEFIT,t);l&&l.status&&d()},A=async t=>{const{status:l}=await h(m.BENEFIT,t.docId,t.displayFlag);if(!l){t.displayFlag=t.displayFlag==="Y"?"N":"Y";return}d()},x=async()=>{const{status:t}=await _(m.BENEFIT,i.value.map((l,g)=>({docId:l.docId,rollingSortOrder:(i.value.length-g).toString()})));t&&d()},I=async()=>{if(i.value.length>=15){f("롤링배너는 15개까지 등록가능합니다.",void 0,"등록 개수가 초과되었습니다.");return}c.push("/benefits-banners/register")},T=async t=>{c.push("/benefits-banners/"+t.docId)};O(()=>{d()});const B={page:p,breadcrumbs:e,alert:f,router:c,deleteBanner:a,reqBannerList:o,updateDisplayFlag:h,reorderBanner:_,tableHeaders:V,banners:i,loading:b,getBannerList:d,onDeleteBanner:E,updateStatus:A,reorder:x,registerBanner:I,bannerDetails:T,BaseBreadcrumb:z,get SortableTable(){return J},get StatusSwitch(){return W},get formatDate(){return Q}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),Z={class:"d-flex justify-space-between align-center"},$={class:"text-subtitle-1 font-weight-bold"},ee=["src"];function ae(C,n,p,e,f,c){return v(),y(j,null,[r(e.BaseBreadcrumb,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),r(U,{class:"mt-4"},{default:s(()=>[r(D,{cols:"12"},{default:s(()=>[S("div",Z,[S("p",$,"총 "+w(e.banners.length)+"개",1),r(F,{flat:"",color:"grey200",onClick:e.registerBanner},{default:s(()=>[N("등록하기")]),_:1})])]),_:1}),r(D,{cols:"12"},{default:s(()=>[r(P,{rounded:"lg",class:"overflow-hidden"},{default:s(()=>[r(R,{class:"pa-0"},{default:s(()=>[r(e.SortableTable,{headers:e.tableHeaders,modelValue:e.banners,"onUpdate:modelValue":n[0]||(n[0]=a=>e.banners=a),"item-key":"docId",onChange:e.reorder,loading:e.loading,"onClick:row":n[1]||(n[1]=a=>e.bannerDetails(a))},{"item-delete":s(a=>[r(F,{flat:"",icon:"mdi-trash-can-outline",size:"small",onClick:L(o=>e.onDeleteBanner(a.data.docId),["stop"]),variant:"text"},null,8,["onClick"])]),"item-attachFile":s(({data:a})=>[a.attachFile?(v(),y("img",{key:0,src:a.attachFile.filePath,alt:"",srcset:"",width:"200"},null,8,ee)):q("",!0)]),"item-createDate":s(({data:a})=>[N(w(e.formatDate(a.createDate,"YYYY[.]MM[.]DD")),1)]),"item-displayFlag":s(({index:a})=>[r(e.StatusSwitch,{modelValue:e.banners[a].displayFlag,"onUpdate:modelValue":o=>e.banners[a].displayFlag=o,"true-value":"Y","false-value":"N",onChange:o=>e.updateStatus(e.banners[a])},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["modelValue","loading"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ce=H(X,[["render",ae],["__file","C:/workspace/hiplusWEB/smhiplus-mobile-admin-front/src/views/ABAN/ABAN1600.vue"]]);export{ce as default};
